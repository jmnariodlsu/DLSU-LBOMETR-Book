<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>10 Advanced Visualizations | LBOMETR Course Book</title>
  <meta name="description" content="An introduction to the LBOMETR Course Book." />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="10 Advanced Visualizations | LBOMETR Course Book" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="An introduction to the LBOMETR Course Book." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="10 Advanced Visualizations | LBOMETR Course Book" />
  
  <meta name="twitter:description" content="An introduction to the LBOMETR Course Book." />
  

<meta name="author" content="Jem Marie M. Nario" />


<meta name="date" content="2025-03-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="visualizations-using-ggplot2.html"/>
<link rel="next" href="descriptive-statistics.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<h1>LBOMETR Course Book</h1>
<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#about-me"><i class="fa fa-check"></i><b>1.1</b> About Me</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="syllabus.html"><a href="syllabus.html"><i class="fa fa-check"></i><b>2</b> Syllabus</a>
<ul>
<li class="chapter" data-level="2.1" data-path="syllabus.html"><a href="syllabus.html#course-description"><i class="fa fa-check"></i><b>2.1</b> Course Description</a></li>
<li class="chapter" data-level="2.2" data-path="syllabus.html"><a href="syllabus.html#learning-outcomes"><i class="fa fa-check"></i><b>2.2</b> Learning Outcomes</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="syllabus.html"><a href="syllabus.html#knowledge"><i class="fa fa-check"></i><b>2.2.1</b> Knowledge</a></li>
<li class="chapter" data-level="2.2.2" data-path="syllabus.html"><a href="syllabus.html#skills"><i class="fa fa-check"></i><b>2.2.2</b> Skills</a></li>
<li class="chapter" data-level="2.2.3" data-path="syllabus.html"><a href="syllabus.html#behaviorattitude"><i class="fa fa-check"></i><b>2.2.3</b> Behavior/Attitude</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="syllabus.html"><a href="syllabus.html#grading"><i class="fa fa-check"></i><b>2.3</b> Grading</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="syllabus.html"><a href="syllabus.html#grade-components"><i class="fa fa-check"></i><b>2.3.1</b> Grade Components</a></li>
<li class="chapter" data-level="2.3.2" data-path="syllabus.html"><a href="syllabus.html#grade-scale"><i class="fa fa-check"></i><b>2.3.2</b> Grade Scale</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="course-assessments.html"><a href="course-assessments.html"><i class="fa fa-check"></i><b>3</b> Course Assessments</a>
<ul>
<li class="chapter" data-level="3.1" data-path="course-assessments.html"><a href="course-assessments.html#data-story-archive"><i class="fa fa-check"></i><b>3.1</b> Data Story Archive</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="course-assessments.html"><a href="course-assessments.html#requirements"><i class="fa fa-check"></i><b>3.1.1</b> Requirements</a></li>
<li class="chapter" data-level="3.1.2" data-path="course-assessments.html"><a href="course-assessments.html#submission"><i class="fa fa-check"></i><b>3.1.2</b> Submission</a></li>
<li class="chapter" data-level="3.1.3" data-path="course-assessments.html"><a href="course-assessments.html#grading-rubric-for-data-story-archive"><i class="fa fa-check"></i><b>3.1.3</b> Grading Rubric for Data Story Archive</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="course-assessments.html"><a href="course-assessments.html#data-story-presentation"><i class="fa fa-check"></i><b>3.2</b> Data Story Presentation</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="course-assessments.html"><a href="course-assessments.html#requirements-1"><i class="fa fa-check"></i><b>3.2.1</b> Requirements</a></li>
<li class="chapter" data-level="3.2.2" data-path="course-assessments.html"><a href="course-assessments.html#grading-rubric"><i class="fa fa-check"></i><b>3.2.2</b> Grading Rubric</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="grouping-process.html"><a href="grouping-process.html"><i class="fa fa-check"></i><b>4</b> Grouping Process</a>
<ul>
<li class="chapter" data-level="4.1" data-path="grouping-process.html"><a href="grouping-process.html#survey"><i class="fa fa-check"></i><b>4.1</b> Survey</a></li>
<li class="chapter" data-level="4.2" data-path="grouping-process.html"><a href="grouping-process.html#how-groups-are-formed"><i class="fa fa-check"></i><b>4.2</b> How Groups Are Formed</a></li>
<li class="chapter" data-level="4.3" data-path="grouping-process.html"><a href="grouping-process.html#announcement-of-groups"><i class="fa fa-check"></i><b>4.3</b> Announcement of Groups</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-story-research-question.html"><a href="data-story-research-question.html"><i class="fa fa-check"></i><b>5</b> Data Story Research Question</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-story-research-question.html"><a href="data-story-research-question.html#guidelines-in-conducting-data-story"><i class="fa fa-check"></i><b>5.1</b> Guidelines in Conducting Data Story</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="data-story-research-question.html"><a href="data-story-research-question.html#research-question"><i class="fa fa-check"></i><b>5.1.1</b> Research Question:</a></li>
<li class="chapter" data-level="5.1.2" data-path="data-story-research-question.html"><a href="data-story-research-question.html#relevance"><i class="fa fa-check"></i><b>5.1.2</b> Relevance</a></li>
<li class="chapter" data-level="5.1.3" data-path="data-story-research-question.html"><a href="data-story-research-question.html#for-the-data-story-should-i-use-kaggle"><i class="fa fa-check"></i><b>5.1.3</b> For the data story, should I use Kaggle?</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="data-story-research-question.html"><a href="data-story-research-question.html#comments-on-research-questions"><i class="fa fa-check"></i><b>5.2</b> Comments on Research Questions:</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html"><i class="fa fa-check"></i><b>6</b> Basic Introduction to R</a>
<ul>
<li class="chapter" data-level="6.1" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#session-information"><i class="fa fa-check"></i><b>6.1</b> Session Information</a></li>
<li class="chapter" data-level="6.2" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#preliminaries"><i class="fa fa-check"></i><b>6.2</b> Preliminaries</a></li>
<li class="chapter" data-level="6.3" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#quarto-markdown"><i class="fa fa-check"></i><b>6.3</b> Quarto Markdown</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#starting-a-quarto-file"><i class="fa fa-check"></i><b>6.3.1</b> 1. Starting a Quarto File</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#packages"><i class="fa fa-check"></i><b>6.4</b> Packages</a></li>
<li class="chapter" data-level="6.5" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#instructions-for-managing-working-directories"><i class="fa fa-check"></i><b>6.5</b> Instructions for Managing Working Directories</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#local-working-directory-setup"><i class="fa fa-check"></i><b>6.5.1</b> 1. Local Working Directory Setup</a></li>
<li class="chapter" data-level="6.5.2" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#file-naming-convention"><i class="fa fa-check"></i><b>6.5.2</b> 2. File Naming Convention</a></li>
<li class="chapter" data-level="6.5.3" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#shared-google-drive-setup"><i class="fa fa-check"></i><b>6.5.3</b> 3. Shared Google Drive Setup</a></li>
<li class="chapter" data-level="6.5.4" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#workflow-for-.qmd-files"><i class="fa fa-check"></i><b>6.5.4</b> 4. Workflow for <code>.qmd</code> files</a></li>
<li class="chapter" data-level="6.5.5" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#rendering-the-final-report"><i class="fa fa-check"></i><b>6.5.5</b> 5. Rendering the Final Report</a></li>
<li class="chapter" data-level="6.5.6" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#summary-workflow"><i class="fa fa-check"></i><b>6.5.6</b> Summary Workflow</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html"><i class="fa fa-check"></i><b>7</b> Data Management - Cross-Sectional Data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#where-to-get-data"><i class="fa fa-check"></i><b>7.1</b> Where to Get Data?</a></li>
<li class="chapter" data-level="7.2" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#preliminaries-1"><i class="fa fa-check"></i><b>7.2</b> Preliminaries</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#dataset"><i class="fa fa-check"></i><b>7.2.1</b> Dataset</a></li>
<li class="chapter" data-level="7.2.2" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#packages-1"><i class="fa fa-check"></i><b>7.2.2</b> Packages</a></li>
<li class="chapter" data-level="7.2.3" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#setting-up-the-directory"><i class="fa fa-check"></i><b>7.2.3</b> Setting up the Directory</a></li>
<li class="chapter" data-level="7.2.4" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#clean-everything"><i class="fa fa-check"></i><b>7.2.4</b> Clean Everything</a></li>
<li class="chapter" data-level="7.2.5" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#importing-the-dataset"><i class="fa fa-check"></i><b>7.2.5</b> Importing the Dataset</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#data-cleaning"><i class="fa fa-check"></i><b>7.3</b> Data Cleaning</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#renaming-the-variables"><i class="fa fa-check"></i><b>7.3.1</b> Renaming the Variables</a></li>
<li class="chapter" data-level="7.3.2" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#sorting-certain-values"><i class="fa fa-check"></i><b>7.3.2</b> Sorting certain values</a></li>
<li class="chapter" data-level="7.3.3" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#pipe-operator"><i class="fa fa-check"></i><b>7.3.3</b> Pipe Operator</a></li>
<li class="chapter" data-level="7.3.4" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#adding-columns"><i class="fa fa-check"></i><b>7.3.4</b> Adding columns</a></li>
<li class="chapter" data-level="7.3.5" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#transforming-values"><i class="fa fa-check"></i><b>7.3.5</b> Transforming values</a></li>
<li class="chapter" data-level="7.3.6" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#summarizing"><i class="fa fa-check"></i><b>7.3.6</b> Summarizing</a></li>
<li class="chapter" data-level="7.3.7" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#merging-datasets"><i class="fa fa-check"></i><b>7.3.7</b> Merging datasets</a></li>
<li class="chapter" data-level="7.3.8" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#splitting-datasets"><i class="fa fa-check"></i><b>7.3.8</b> Splitting datasets</a></li>
<li class="chapter" data-level="7.3.9" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#dates"><i class="fa fa-check"></i><b>7.3.9</b> Dates</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#data-management-practical"><i class="fa fa-check"></i><b>7.4</b> Data Management Practical</a></li>
<li class="chapter" data-level="7.5" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#data-management-cross-sectional-feedback"><i class="fa fa-check"></i><b>7.5</b> Data Management (Cross-Sectional) Feedback</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html"><i class="fa fa-check"></i><b>8</b> Data Management - Time Series and Panel Data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#topic-guide"><i class="fa fa-check"></i><b>8.1</b> Topic Guide:</a></li>
<li class="chapter" data-level="8.2" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#time-series-data"><i class="fa fa-check"></i><b>8.2</b> Time Series Data</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#preliminaries-2"><i class="fa fa-check"></i><b>8.2.1</b> Preliminaries</a></li>
<li class="chapter" data-level="8.2.2" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#convert-to-date-format"><i class="fa fa-check"></i><b>8.2.2</b> Convert to Date Format</a></li>
<li class="chapter" data-level="8.2.3" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#aggregate-data"><i class="fa fa-check"></i><b>8.2.3</b> Aggregate Data</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#modifying-long-and-wide-datasets"><i class="fa fa-check"></i><b>8.3</b> Modifying Long and Wide Datasets</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#how-to-determine"><i class="fa fa-check"></i><b>8.3.1</b> How to Determine</a></li>
<li class="chapter" data-level="8.3.2" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#setting-up-the-dataset"><i class="fa fa-check"></i><b>8.3.2</b> Setting up the Dataset</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#missing-values"><i class="fa fa-check"></i><b>8.4</b> Missing Values</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#setting-up-a-sample-dataset"><i class="fa fa-check"></i><b>8.4.1</b> Setting up a Sample Dataset</a></li>
<li class="chapter" data-level="8.4.2" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#replace-with-0"><i class="fa fa-check"></i><b>8.4.2</b> Replace with <code>0</code></a></li>
<li class="chapter" data-level="8.4.3" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#remove-rows-or-columns-with-missing-values"><i class="fa fa-check"></i><b>8.4.3</b> Remove Rows or Columns with Missing Values</a></li>
<li class="chapter" data-level="8.4.4" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#imputing-missing-values-with-the-mean"><i class="fa fa-check"></i><b>8.4.4</b> Imputing Missing Values with the Mean</a></li>
<li class="chapter" data-level="8.4.5" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#note"><i class="fa fa-check"></i><b>8.4.5</b> Note:</a></li>
<li class="chapter" data-level="8.4.6" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#best-practice"><i class="fa fa-check"></i><b>8.4.6</b> Best Practice:</a></li>
<li class="chapter" data-level="8.4.7" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#next-meeting"><i class="fa fa-check"></i><b>8.4.7</b> Next Meeting:</a></li>
<li class="chapter" data-level="8.4.8" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#final-note"><i class="fa fa-check"></i><b>8.4.8</b> Final Note:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="visualizations-using-ggplot2.html"><a href="visualizations-using-ggplot2.html"><i class="fa fa-check"></i><b>9</b> Visualizations using ggplot2</a>
<ul>
<li class="chapter" data-level="9.1" data-path="visualizations-using-ggplot2.html"><a href="visualizations-using-ggplot2.html#preliminaries-3"><i class="fa fa-check"></i><b>9.1</b> Preliminaries</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="visualizations-using-ggplot2.html"><a href="visualizations-using-ggplot2.html#load-the-dataset"><i class="fa fa-check"></i><b>9.1.1</b> Load the dataset</a></li>
<li class="chapter" data-level="9.1.2" data-path="visualizations-using-ggplot2.html"><a href="visualizations-using-ggplot2.html#template"><i class="fa fa-check"></i><b>9.1.2</b> Template</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="visualizations-using-ggplot2.html"><a href="visualizations-using-ggplot2.html#visualizing-data-using-geom"><i class="fa fa-check"></i><b>9.2</b> Visualizing Data using <code>geom</code></a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="visualizations-using-ggplot2.html"><a href="visualizations-using-ggplot2.html#scatterplots"><i class="fa fa-check"></i><b>9.2.1</b> Scatterplots</a></li>
<li class="chapter" data-level="9.2.2" data-path="visualizations-using-ggplot2.html"><a href="visualizations-using-ggplot2.html#boxplots"><i class="fa fa-check"></i><b>9.2.2</b> Boxplots</a></li>
<li class="chapter" data-level="9.2.3" data-path="visualizations-using-ggplot2.html"><a href="visualizations-using-ggplot2.html#bar-plots"><i class="fa fa-check"></i><b>9.2.3</b> Bar plots</a></li>
<li class="chapter" data-level="9.2.4" data-path="visualizations-using-ggplot2.html"><a href="visualizations-using-ggplot2.html#faceting"><i class="fa fa-check"></i><b>9.2.4</b> Faceting</a></li>
<li class="chapter" data-level="9.2.5" data-path="visualizations-using-ggplot2.html"><a href="visualizations-using-ggplot2.html#pie-chart"><i class="fa fa-check"></i><b>9.2.5</b> Pie Chart</a></li>
<li class="chapter" data-level="9.2.6" data-path="visualizations-using-ggplot2.html"><a href="visualizations-using-ggplot2.html#histogram"><i class="fa fa-check"></i><b>9.2.6</b> Histogram</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="visualizations-using-ggplot2.html"><a href="visualizations-using-ggplot2.html#visualizing-time-series-data"><i class="fa fa-check"></i><b>9.3</b> Visualizing Time Series Data</a></li>
<li class="chapter" data-level="9.4" data-path="visualizations-using-ggplot2.html"><a href="visualizations-using-ggplot2.html#practical-visualizations"><i class="fa fa-check"></i><b>9.4</b> Practical: Visualizations</a></li>
<li class="chapter" data-level="9.5" data-path="visualizations-using-ggplot2.html"><a href="visualizations-using-ggplot2.html#feedback-practical-visualizations"><i class="fa fa-check"></i><b>9.5</b> Feedback: Practical Visualizations</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html"><i class="fa fa-check"></i><b>10</b> Advanced Visualizations</a>
<ul>
<li class="chapter" data-level="10.1" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html#preliminaries-4"><i class="fa fa-check"></i><b>10.1</b> Preliminaries</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html#install-packages"><i class="fa fa-check"></i><b>10.1.1</b> Install Packages</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html#animated-visualizations"><i class="fa fa-check"></i><b>10.2</b> Animated Visualizations</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html#animated-bar-chart"><i class="fa fa-check"></i><b>10.2.1</b> Animated Bar Chart</a></li>
<li class="chapter" data-level="10.2.2" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html#animated-scatter-plot"><i class="fa fa-check"></i><b>10.2.2</b> Animated Scatter Plot</a></li>
<li class="chapter" data-level="10.2.3" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html#animated-faceted-scatter-plot"><i class="fa fa-check"></i><b>10.2.3</b> Animated Faceted Scatter Plot</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html#animated-time-series"><i class="fa fa-check"></i><b>10.3</b> Animated Time Series</a></li>
<li class="chapter" data-level="10.4" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html#animated-faceted-time-series"><i class="fa fa-check"></i><b>10.4</b> Animated Faceted Time Series</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html#saving-in-quarto"><i class="fa fa-check"></i><b>10.4.1</b> Saving in Quarto</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html#maps"><i class="fa fa-check"></i><b>10.5</b> Maps</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html#where-to-get-shapefiles"><i class="fa fa-check"></i><b>10.5.1</b> Where to get shapefiles?</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html#static-maps"><i class="fa fa-check"></i><b>10.6</b> Static Maps</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html#fetching-gdp-data-from-wdi"><i class="fa fa-check"></i><b>10.6.1</b> Fetching GDP Data from WDI</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html#philippine-regional-map"><i class="fa fa-check"></i><b>10.7</b> Philippine Regional Map</a></li>
<li class="chapter" data-level="10.8" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html#animated-map"><i class="fa fa-check"></i><b>10.8</b> Animated Map</a></li>
<li class="chapter" data-level="10.9" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html#practical-advanced-visualizations"><i class="fa fa-check"></i><b>10.9</b> Practical: Advanced Visualizations</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html"><i class="fa fa-check"></i><b>11</b> Descriptive Statistics</a>
<ul>
<li class="chapter" data-level="11.1" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#preliminaries-5"><i class="fa fa-check"></i><b>11.1</b> Preliminaries</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#install-packages-1"><i class="fa fa-check"></i><b>11.1.1</b> Install Packages</a></li>
<li class="chapter" data-level="11.1.2" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#load-the-dataset-1"><i class="fa fa-check"></i><b>11.1.2</b> Load the dataset</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#frequency-table"><i class="fa fa-check"></i><b>11.2</b> Frequency Table</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#male"><i class="fa fa-check"></i><b>11.2.1</b> Male</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#histogram-1"><i class="fa fa-check"></i><b>11.3</b> Histogram</a></li>
<li class="chapter" data-level="11.4" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#summary-table"><i class="fa fa-check"></i><b>11.4</b> Summary Table</a></li>
<li class="chapter" data-level="11.5" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#interpretation-of-descriptive-statistics"><i class="fa fa-check"></i><b>11.5</b> Interpretation of Descriptive Statistics:</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#key-components-of-descriptive-statistics"><i class="fa fa-check"></i><b>11.5.1</b> <strong>Key Components of Descriptive Statistics</strong></a></li>
<li class="chapter" data-level="11.5.2" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#when-to-use-mean-or-median"><i class="fa fa-check"></i><b>11.5.2</b> <strong>When to Use Mean or Median</strong></a></li>
<li class="chapter" data-level="11.5.3" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#purpose-of-descriptive-statistics"><i class="fa fa-check"></i><b>11.5.3</b> <strong>Purpose of Descriptive Statistics</strong></a></li>
<li class="chapter" data-level="11.5.4" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#limitations"><i class="fa fa-check"></i><b>11.5.4</b> <strong>Limitations</strong></a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#practical-descriptive-statistics"><i class="fa fa-check"></i><b>11.6</b> Practical: Descriptive Statistics</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#descriptive-statistics-questions"><i class="fa fa-check"></i><b>11.6.1</b> <strong>Descriptive Statistics Questions</strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html"><i class="fa fa-check"></i><b>12</b> Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="12.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#steps-1"><i class="fa fa-check"></i><b>12.1</b> Steps:</a></li>
<li class="chapter" data-level="12.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#difference-between-one-tailed-test-and-two-tailed-test"><i class="fa fa-check"></i><b>12.2</b> Difference between one-tailed test and two-tailed test</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#deciding-between-one-tailed-versus-two-tailed"><i class="fa fa-check"></i><b>12.2.1</b> Deciding between One-Tailed versus Two-Tailed</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#test-of-proportions"><i class="fa fa-check"></i><b>12.3</b> Test of Proportions</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#one-sample-test-of-proportion"><i class="fa fa-check"></i><b>12.3.1</b> <strong>One-Sample Test of Proportion</strong></a></li>
<li class="chapter" data-level="12.3.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#two-sample-test-of-proportion"><i class="fa fa-check"></i><b>12.3.2</b> <strong>Two-Sample Test of Proportion</strong></a></li>
<li class="chapter" data-level="12.3.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#real-world-example"><i class="fa fa-check"></i><b>12.3.3</b> Real-World Example:</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#t-tests"><i class="fa fa-check"></i><b>12.4</b> T-Tests</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#one-sample-t-test"><i class="fa fa-check"></i><b>12.4.1</b> One-Sample T-Test</a></li>
<li class="chapter" data-level="12.4.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#real-world-example-1"><i class="fa fa-check"></i><b>12.4.2</b> Real-World Example</a></li>
<li class="chapter" data-level="12.4.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#independent-samples-t-test"><i class="fa fa-check"></i><b>12.4.3</b> Independent-Samples T-Test</a></li>
<li class="chapter" data-level="12.4.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#real-world-example-2"><i class="fa fa-check"></i><b>12.4.4</b> Real-World Example</a></li>
<li class="chapter" data-level="12.4.5" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#paired-samples-t-test"><i class="fa fa-check"></i><b>12.4.5</b> Paired-Samples T-Test</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="ordinary-least-squares.html"><a href="ordinary-least-squares.html"><i class="fa fa-check"></i><b>13</b> Ordinary Least Squares</a>
<ul>
<li class="chapter" data-level="13.1" data-path="ordinary-least-squares.html"><a href="ordinary-least-squares.html#general-description-and-notation-of-a-linear-regression"><i class="fa fa-check"></i><b>13.1</b> <strong>General Description and notation of a Linear Regression</strong></a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="ordinary-least-squares.html"><a href="ordinary-least-squares.html#the-notation"><i class="fa fa-check"></i><b>13.1.1</b> The notation</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="ordinary-least-squares.html"><a href="ordinary-least-squares.html#running-and-reporting-ols-regression"><i class="fa fa-check"></i><b>13.2</b> <strong>Running and reporting OLS Regression</strong></a></li>
<li class="chapter" data-level="13.3" data-path="ordinary-least-squares.html"><a href="ordinary-least-squares.html#interpretation-of-coefficients"><i class="fa fa-check"></i><b>13.3</b> <strong>Interpretation of Coefficients</strong></a></li>
<li class="chapter" data-level="13.4" data-path="ordinary-least-squares.html"><a href="ordinary-least-squares.html#goodness-of-fit-f-statistics-and-adjusted-r-squared"><i class="fa fa-check"></i><b>13.4</b> <strong>Goodness of Fit (F-Statistics and Adjusted R-squared)</strong></a></li>
<li class="chapter" data-level="13.5" data-path="ordinary-least-squares.html"><a href="ordinary-least-squares.html#assumption-diagnostics"><i class="fa fa-check"></i><b>13.5</b> <strong>Assumption Diagnostics</strong></a></li>
<li class="chapter" data-level="13.6" data-path="ordinary-least-squares.html"><a href="ordinary-least-squares.html#real-world-example-3"><i class="fa fa-check"></i><b>13.6</b> Real-World Example</a></li>
<li class="chapter" data-level="13.7" data-path="ordinary-least-squares.html"><a href="ordinary-least-squares.html#practical-hypothesis-testing-and-ols"><i class="fa fa-check"></i><b>13.7</b> Practical: Hypothesis Testing and OLS</a></li>
<li class="chapter" data-level="13.8" data-path="ordinary-least-squares.html"><a href="ordinary-least-squares.html#hypothesis-testing-1"><i class="fa fa-check"></i><b>13.8</b> Hypothesis Testing</a></li>
<li class="chapter" data-level="13.9" data-path="ordinary-least-squares.html"><a href="ordinary-least-squares.html#ols"><i class="fa fa-check"></i><b>13.9</b> OLS</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="multivariate-regression-with-dummy-variables.html"><a href="multivariate-regression-with-dummy-variables.html"><i class="fa fa-check"></i><b>14</b> Multivariate Regression with Dummy Variables</a>
<ul>
<li class="chapter" data-level="14.1" data-path="multivariate-regression-with-dummy-variables.html"><a href="multivariate-regression-with-dummy-variables.html#dummy-variables"><i class="fa fa-check"></i><b>14.1</b> Dummy Variables</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="multivariate-regression-with-dummy-variables.html"><a href="multivariate-regression-with-dummy-variables.html#several-related-dummy-variables"><i class="fa fa-check"></i><b>14.1.1</b> Several related dummy variables</a></li>
<li class="chapter" data-level="14.1.2" data-path="multivariate-regression-with-dummy-variables.html"><a href="multivariate-regression-with-dummy-variables.html#dummy-variable-and-continuous-variable-in-regression"><i class="fa fa-check"></i><b>14.1.2</b> Dummy Variable and Continuous Variable in Regression</a></li>
<li class="chapter" data-level="14.1.3" data-path="multivariate-regression-with-dummy-variables.html"><a href="multivariate-regression-with-dummy-variables.html#interaction-terms-with-non-dummy-variables"><i class="fa fa-check"></i><b>14.1.3</b> Interaction terms with non-dummy variables</a></li>
<li class="chapter" data-level="14.1.4" data-path="multivariate-regression-with-dummy-variables.html"><a href="multivariate-regression-with-dummy-variables.html#f-test-for-differences-across-groups"><i class="fa fa-check"></i><b>14.1.4</b> F-test for differences across groups</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="formal-tests-on-assumptions.html"><a href="formal-tests-on-assumptions.html"><i class="fa fa-check"></i><b>15</b> Formal Tests on Assumptions</a>
<ul>
<li class="chapter" data-level="15.1" data-path="formal-tests-on-assumptions.html"><a href="formal-tests-on-assumptions.html#multicollinearity"><i class="fa fa-check"></i><b>15.1</b> Multicollinearity</a></li>
<li class="chapter" data-level="15.2" data-path="formal-tests-on-assumptions.html"><a href="formal-tests-on-assumptions.html#heteroscedasticity"><i class="fa fa-check"></i><b>15.2</b> Heteroscedasticity</a></li>
<li class="chapter" data-level="15.3" data-path="formal-tests-on-assumptions.html"><a href="formal-tests-on-assumptions.html#specification-errors"><i class="fa fa-check"></i><b>15.3</b> Specification Errors</a></li>
<li class="chapter" data-level="15.4" data-path="formal-tests-on-assumptions.html"><a href="formal-tests-on-assumptions.html#alternative-functional-forms"><i class="fa fa-check"></i><b>15.4</b> Alternative Functional Forms</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="formal-tests-on-assumptions.html"><a href="formal-tests-on-assumptions.html#log-log-model"><i class="fa fa-check"></i><b>15.4.1</b> Log-Log Model</a></li>
<li class="chapter" data-level="15.4.2" data-path="formal-tests-on-assumptions.html"><a href="formal-tests-on-assumptions.html#log-lin-model"><i class="fa fa-check"></i><b>15.4.2</b> Log-Lin Model</a></li>
<li class="chapter" data-level="15.4.3" data-path="formal-tests-on-assumptions.html"><a href="formal-tests-on-assumptions.html#lin-log-model"><i class="fa fa-check"></i><b>15.4.3</b> Lin-Log Model</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="formal-tests-on-assumptions.html"><a href="formal-tests-on-assumptions.html#practical-multivariate-dummy-regression-and-formal-tests-of-assumptions"><i class="fa fa-check"></i><b>15.5</b> Practical: Multivariate (Dummy) Regression and Formal Tests of Assumptions</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="additional-topics.html"><a href="additional-topics.html"><i class="fa fa-check"></i><b>16</b> Additional Topics</a>
<ul>
<li class="chapter" data-level="16.1" data-path="additional-topics.html"><a href="additional-topics.html#predicting-outcome-using-ols"><i class="fa fa-check"></i><b>16.1</b> Predicting Outcome using OLS</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="additional-topics.html"><a href="additional-topics.html#simulated-data"><i class="fa fa-check"></i><b>16.1.1</b> Simulated Data</a></li>
<li class="chapter" data-level="16.1.2" data-path="additional-topics.html"><a href="additional-topics.html#ols-1"><i class="fa fa-check"></i><b>16.1.2</b> OLS</a></li>
<li class="chapter" data-level="16.1.3" data-path="additional-topics.html"><a href="additional-topics.html#use-predict"><i class="fa fa-check"></i><b>16.1.3</b> Use <code>predict()</code></a></li>
<li class="chapter" data-level="16.1.4" data-path="additional-topics.html"><a href="additional-topics.html#extra-visualization"><i class="fa fa-check"></i><b>16.1.4</b> Extra: Visualization</a></li>
<li class="chapter" data-level="16.1.5" data-path="additional-topics.html"><a href="additional-topics.html#real-data"><i class="fa fa-check"></i><b>16.1.5</b> Real Data</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="additional-topics.html"><a href="additional-topics.html#designing-and-testing-a-survey"><i class="fa fa-check"></i><b>16.2</b> Designing and Testing a Survey</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="additional-topics.html"><a href="additional-topics.html#calculating-sample-size"><i class="fa fa-check"></i><b>16.2.1</b> Calculating Sample Size</a></li>
<li class="chapter" data-level="16.2.2" data-path="additional-topics.html"><a href="additional-topics.html#testing-survey-reliability---cronbachs-alpha"><i class="fa fa-check"></i><b>16.2.2</b> Testing Survey Reliability - Cronbach’s Alpha</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="additional-topics.html"><a href="additional-topics.html#panel-data-models-fixed-vs.-random-effects"><i class="fa fa-check"></i><b>16.3</b> Panel Data Models (Fixed vs. Random Effects)</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="additional-topics.html"><a href="additional-topics.html#simulated-panel-dataset"><i class="fa fa-check"></i><b>16.3.1</b> Simulated Panel Dataset</a></li>
<li class="chapter" data-level="16.3.2" data-path="additional-topics.html"><a href="additional-topics.html#fixed-effects-vs.-random-effects"><i class="fa fa-check"></i><b>16.3.2</b> Fixed Effects vs. Random Effects</a></li>
<li class="chapter" data-level="16.3.3" data-path="additional-topics.html"><a href="additional-topics.html#hausman-test"><i class="fa fa-check"></i><b>16.3.3</b> Hausman Test</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="additional-topics.html"><a href="additional-topics.html#lagged-values-and-preliminaries-in-forecasting"><i class="fa fa-check"></i><b>16.4</b> Lagged Values and Preliminaries in Forecasting</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="additional-topics.html"><a href="additional-topics.html#simulated-time-series"><i class="fa fa-check"></i><b>16.4.1</b> Simulated Time Series</a></li>
<li class="chapter" data-level="16.4.2" data-path="additional-topics.html"><a href="additional-topics.html#real-data-1"><i class="fa fa-check"></i><b>16.4.2</b> Real Data</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="additional-topics.html"><a href="additional-topics.html#the-end"><i class="fa fa-check"></i><b>16.5</b> The End!</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">LBOMETR Course Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="advanced-visualizations" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number">10</span> Advanced Visualizations<a href="advanced-visualizations.html#advanced-visualizations" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="preliminaries-4" class="section level2 hasAnchor" number="10.1">
<h2><span class="header-section-number">10.1</span> Preliminaries<a href="advanced-visualizations.html#preliminaries-4" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="install-packages" class="section level3 hasAnchor" number="10.1.1">
<h3><span class="header-section-number">10.1.1</span> Install Packages<a href="advanced-visualizations.html#install-packages" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For this lecture, you need to install a lot of packages. Please do this before our lecture as it will take a long time to install them. Furthermore, there might be issues in installing, such as needing to install other packages. Please let the professor know if you encounter any issues.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="advanced-visualizations.html#cb168-1" tabindex="-1"></a><span class="co"># Install necessary packages</span></span>
<span id="cb168-2"><a href="advanced-visualizations.html#cb168-2" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(gganimate)) <span class="fu">install.packages</span>(<span class="st">&quot;gganimate&quot;</span>)</span>
<span id="cb168-3"><a href="advanced-visualizations.html#cb168-3" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(ggplot2)) <span class="fu">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb168-4"><a href="advanced-visualizations.html#cb168-4" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(dplyr)) <span class="fu">install.packages</span>(<span class="st">&quot;dplyr&quot;</span>)</span>
<span id="cb168-5"><a href="advanced-visualizations.html#cb168-5" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(sf)) <span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>)</span>
<span id="cb168-6"><a href="advanced-visualizations.html#cb168-6" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(rnaturalearth)) <span class="fu">install.packages</span>(<span class="st">&quot;rnaturalearth&quot;</span>)</span>
<span id="cb168-7"><a href="advanced-visualizations.html#cb168-7" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(readr)) <span class="fu">install.packages</span>(<span class="st">&quot;readr&quot;</span>)</span>
<span id="cb168-8"><a href="advanced-visualizations.html#cb168-8" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(tidyr)) <span class="fu">install.packages</span>(<span class="st">&quot;tidyr&quot;</span>)</span>
<span id="cb168-9"><a href="advanced-visualizations.html#cb168-9" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(gifski)) <span class="fu">install.packages</span>(<span class="st">&quot;gifski&quot;</span>)</span>
<span id="cb168-10"><a href="advanced-visualizations.html#cb168-10" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(WDI)) <span class="fu">install.packages</span>(<span class="st">&quot;WDI&quot;</span>)</span>
<span id="cb168-11"><a href="advanced-visualizations.html#cb168-11" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(leaflet)) <span class="fu">install.packages</span>(<span class="st">&quot;leaflet&quot;</span>)</span>
<span id="cb168-12"><a href="advanced-visualizations.html#cb168-12" tabindex="-1"></a></span>
<span id="cb168-13"><a href="advanced-visualizations.html#cb168-13" tabindex="-1"></a><span class="co">#Load packages</span></span>
<span id="cb168-14"><a href="advanced-visualizations.html#cb168-14" tabindex="-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb168-15"><a href="advanced-visualizations.html#cb168-15" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb168-16"><a href="advanced-visualizations.html#cb168-16" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb168-17"><a href="advanced-visualizations.html#cb168-17" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb168-18"><a href="advanced-visualizations.html#cb168-18" tabindex="-1"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb168-19"><a href="advanced-visualizations.html#cb168-19" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb168-20"><a href="advanced-visualizations.html#cb168-20" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb168-21"><a href="advanced-visualizations.html#cb168-21" tabindex="-1"></a><span class="fu">library</span>(gifski)</span>
<span id="cb168-22"><a href="advanced-visualizations.html#cb168-22" tabindex="-1"></a><span class="fu">library</span>(WDI)</span>
<span id="cb168-23"><a href="advanced-visualizations.html#cb168-23" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span></code></pre></div>
</div>
</div>
<div id="animated-visualizations" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> Animated Visualizations<a href="advanced-visualizations.html#animated-visualizations" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>gganimate</code> includes animation to <code>ggplot2</code>; It adds some classes to the plot object in order to customise how it should change with time.</p>
<ul>
<li><p><code>transition_*()</code> defines how the data should be spread out and how it relates to itself across time.</p></li>
<li><p><code>view_*()</code> defines how the positional scales should change along the animation.</p></li>
<li><p><code>shadow_*()</code> defines how data from other points in time should be presented in the given point in time.</p></li>
<li><p><code>enter_*()</code>/<code>exit_*()</code> defines how new data should appear and how old data should disappear during the course of the animation.</p></li>
<li><p><a href="https://gganimate.com/reference/ease_aes.html"><code>ease_aes()</code></a> defines how different aesthetics should be eased during transitions</p>
<p>For this lecture, we will use the <code>quotas</code> dataset and fetch some World Bank Development Indicators from the <code>WDI</code> package.</p></li>
</ul>
<div id="animated-bar-chart" class="section level3 hasAnchor" number="10.2.1">
<h3><span class="header-section-number">10.2.1</span> Animated Bar Chart<a href="advanced-visualizations.html#animated-bar-chart" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>At the start, you need to do the same steps as that of when doing the visualizations <em>without</em> animations.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="advanced-visualizations.html#cb169-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb169-2"><a href="advanced-visualizations.html#cb169-2" tabindex="-1"></a><span class="fu">gc</span>()</span></code></pre></div>
<pre><code>##            used  (Mb) gc trigger  (Mb) max used  (Mb)
## Ncells  5655191 302.1    9801260 523.5  9801260 523.5
## Vcells 11545655  88.1   38668140 295.1 94237569 719.0</code></pre>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="advanced-visualizations.html#cb171-1" tabindex="-1"></a><span class="co"># Load the dataset</span></span>
<span id="cb171-2"><a href="advanced-visualizations.html#cb171-2" tabindex="-1"></a>quotas <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;quotas.csv&quot;</span>)</span>
<span id="cb171-3"><a href="advanced-visualizations.html#cb171-3" tabindex="-1"></a></span>
<span id="cb171-4"><a href="advanced-visualizations.html#cb171-4" tabindex="-1"></a>ch5<span class="fl">.1</span><span class="ot">&lt;-</span>quotas <span class="sc">%&gt;%</span> </span>
<span id="cb171-5"><a href="advanced-visualizations.html#cb171-5" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">factor</span>(AC_type_noST)))<span class="sc">+</span></span>
<span id="cb171-6"><a href="advanced-visualizations.html#cb171-6" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill=</span><span class="st">&quot;darkgreen&quot;</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>)<span class="sc">+</span></span>
<span id="cb171-7"><a href="advanced-visualizations.html#cb171-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Animated Bar Chart: Assembly Constituencies&quot;</span>,</span>
<span id="cb171-8"><a href="advanced-visualizations.html#cb171-8" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Reservation Status&quot;</span>, <span class="at">y=</span><span class="st">&quot;Count&quot;</span>)<span class="sc">+</span></span>
<span id="cb171-9"><a href="advanced-visualizations.html#cb171-9" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb171-10"><a href="advanced-visualizations.html#cb171-10" tabindex="-1"></a>  <span class="fu">transition_states</span>(AC_type_noST, <span class="at">transition_length =</span> <span class="dv">2</span>, <span class="at">state_length =</span> <span class="dv">1</span>)</span></code></pre></div>
<p>The <code>transition_states</code> animates transitions between different categorical states. The <code>AC_type_noST</code> is the categorical variable that defines different animation states. The <code>transition_length</code> controls how long the transition between states lasts, measured in animation frames. While the <code>state_length</code> defines how long each state remains static before transitioning to the next one.</p>
<div id="saving-and-embedding-animation" class="section level4 hasAnchor" number="10.2.1.1">
<h4><span class="header-section-number">10.2.1.1</span> Saving and Embedding Animation<a href="advanced-visualizations.html#saving-and-embedding-animation" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This is very important; it is different for Quarto where the gif is automatically rendered; however, later, we will find out how to save in Quarto.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="advanced-visualizations.html#cb172-1" tabindex="-1"></a>anim_file <span class="ot">&lt;-</span> <span class="st">&quot;bar_chart.gif&quot;</span></span>
<span id="cb172-2"><a href="advanced-visualizations.html#cb172-2" tabindex="-1"></a><span class="fu">animate</span>(ch5<span class="fl">.1</span>, <span class="at">duration =</span> <span class="dv">4</span>, <span class="at">fps =</span> <span class="dv">10</span>, <span class="at">renderer =</span> <span class="fu">gifski_renderer</span>(anim_file), </span>
<span id="cb172-3"><a href="advanced-visualizations.html#cb172-3" tabindex="-1"></a>        <span class="at">preview =</span> <span class="cn">TRUE</span>)  <span class="co"># Preview the animation before rendering  </span></span>
<span id="cb172-4"><a href="advanced-visualizations.html#cb172-4" tabindex="-1"></a><span class="co"># Save animation as a GIF</span></span>
<span id="cb172-5"><a href="advanced-visualizations.html#cb172-5" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(anim_file)</span></code></pre></div>
<p>The animate function generates the animation of the ggplot object <code>ch5.1</code>. <code>duration = 4</code>: Specifies that the animation should run for 4 seconds in total. <code>fps = 10</code>: Defines the frame rate, meaning the animation will show 10 frames per second. <code>renderer = gifski_renderer(anim_file)</code>: Uses the <code>gifski_renderer</code> to save the animation as a GIF file named <code>bar_chart.gif</code>. <code>preview = TRUE</code>: Allows you to view the animation immediately in the RStudio Viewer before saving it as a file.</p>
</div>
</div>
<div id="animated-scatter-plot" class="section level3 hasAnchor" number="10.2.2">
<h3><span class="header-section-number">10.2.2</span> Animated Scatter Plot<a href="advanced-visualizations.html#animated-scatter-plot" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="advanced-visualizations.html#cb173-1" tabindex="-1"></a>ch5<span class="fl">.2</span><span class="ot">&lt;-</span>quotas <span class="sc">%&gt;%</span> </span>
<span id="cb173-2"><a href="advanced-visualizations.html#cb173-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Plit71, <span class="at">y=</span>P_W71))<span class="sc">+</span></span>
<span id="cb173-3"><a href="advanced-visualizations.html#cb173-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color=</span><span class="fu">factor</span>(AC_type_noST)))<span class="sc">+</span></span>
<span id="cb173-4"><a href="advanced-visualizations.html#cb173-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Animated Scatter Plot: Literacy vs. Employment&quot;</span>,</span>
<span id="cb173-5"><a href="advanced-visualizations.html#cb173-5" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Literacy Rate (1971)&quot;</span>, <span class="at">y=</span><span class="st">&quot;Employment Rate (1971)&quot;</span>, <span class="at">color=</span><span class="st">&quot;Reservation Status&quot;</span>)<span class="sc">+</span></span>
<span id="cb173-6"><a href="advanced-visualizations.html#cb173-6" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb173-7"><a href="advanced-visualizations.html#cb173-7" tabindex="-1"></a>  <span class="fu">transition_reveal</span>(Plit71)</span></code></pre></div>
<p>Here, the <code>transition_reveal</code> animates the points to be revealed over literacy rates</p>
<div id="saving-and-embedding-animation-1" class="section level4 hasAnchor" number="10.2.2.1">
<h4><span class="header-section-number">10.2.2.1</span> Saving and Embedding Animation<a href="advanced-visualizations.html#saving-and-embedding-animation-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="advanced-visualizations.html#cb174-1" tabindex="-1"></a>anim_file2<span class="ot">&lt;-</span><span class="st">&quot;scatter_plot.gif&quot;</span></span>
<span id="cb174-2"><a href="advanced-visualizations.html#cb174-2" tabindex="-1"></a><span class="fu">animate</span>(ch5<span class="fl">.2</span>, <span class="at">duration=</span><span class="dv">20</span>, <span class="at">fps=</span><span class="dv">10</span>, <span class="at">renderer=</span><span class="fu">gifski_renderer</span>(anim_file2),</span>
<span id="cb174-3"><a href="advanced-visualizations.html#cb174-3" tabindex="-1"></a>        <span class="at">preview=</span><span class="cn">TRUE</span>)</span>
<span id="cb174-4"><a href="advanced-visualizations.html#cb174-4" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(anim_file2)</span></code></pre></div>
<p>To slow down the animation, increase the duration and decrease fps.</p>
</div>
</div>
<div id="animated-faceted-scatter-plot" class="section level3 hasAnchor" number="10.2.3">
<h3><span class="header-section-number">10.2.3</span> Animated Faceted Scatter Plot<a href="advanced-visualizations.html#animated-faceted-scatter-plot" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="fetching-wdi-data" class="section level4 hasAnchor" number="10.2.3.1">
<h4><span class="header-section-number">10.2.3.1</span> Fetching WDI Data<a href="advanced-visualizations.html#fetching-wdi-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For this portion, we will make use of the WDI database. To search which indicator you wish to work with, type <code>WDIsearch("keyword")</code></p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="advanced-visualizations.html#cb175-1" tabindex="-1"></a>ch5<span class="ot">&lt;-</span><span class="fu">WDI</span>(</span>
<span id="cb175-2"><a href="advanced-visualizations.html#cb175-2" tabindex="-1"></a>  <span class="at">country =</span> <span class="fu">c</span>(<span class="st">&quot;USA&quot;</span>,<span class="st">&quot;CHN&quot;</span>, <span class="st">&quot;IND&quot;</span>, <span class="st">&quot;BRA&quot;</span>,<span class="st">&quot;NLD&quot;</span>, <span class="st">&quot;JPN&quot;</span>),</span>
<span id="cb175-3"><a href="advanced-visualizations.html#cb175-3" tabindex="-1"></a>  <span class="at">indicator =</span> <span class="fu">c</span>(<span class="st">&quot;NY.GDP.PCAP.CD&quot;</span>, <span class="st">&quot;SP.DYN.LE00.IN&quot;</span>),</span>
<span id="cb175-4"><a href="advanced-visualizations.html#cb175-4" tabindex="-1"></a>  <span class="at">start =</span> <span class="dv">2000</span>,</span>
<span id="cb175-5"><a href="advanced-visualizations.html#cb175-5" tabindex="-1"></a>  <span class="at">end =</span> <span class="dv">2020</span>,</span>
<span id="cb175-6"><a href="advanced-visualizations.html#cb175-6" tabindex="-1"></a>  <span class="at">extra =</span> <span class="cn">TRUE</span></span>
<span id="cb175-7"><a href="advanced-visualizations.html#cb175-7" tabindex="-1"></a>)</span></code></pre></div>
<p>This code chunk pulls data from the World Bank WDI database of 6 countries and two indicators (GDP per capita (current US$) and Life Expectancy at Birth (years). It fetches data from 2000 to 2020 and includes extra metadata such as region names and income levels.</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="advanced-visualizations.html#cb176-1" tabindex="-1"></a><span class="co">#Cleaning the dataset</span></span>
<span id="cb176-2"><a href="advanced-visualizations.html#cb176-2" tabindex="-1"></a>ch5 <span class="ot">&lt;-</span> ch5 <span class="sc">%&gt;%</span></span>
<span id="cb176-3"><a href="advanced-visualizations.html#cb176-3" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">GDPpc =</span> NY.GDP.PCAP.CD, <span class="at">Life_Exp =</span> SP.DYN.LE00.IN)</span>
<span id="cb176-4"><a href="advanced-visualizations.html#cb176-4" tabindex="-1"></a>ch5<span class="ot">&lt;-</span>ch5 <span class="sc">%&gt;%</span> </span>
<span id="cb176-5"><a href="advanced-visualizations.html#cb176-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(GDPpc), <span class="sc">!</span><span class="fu">is.na</span>(Life_Exp))</span>
<span id="cb176-6"><a href="advanced-visualizations.html#cb176-6" tabindex="-1"></a><span class="fu">head</span>(ch5)</span></code></pre></div>
<pre><code>##   country iso2c iso3c year status lastupdated    GDPpc Life_Exp                    region  capital longitude latitude
## 1  Brazil    BR   BRA 2000         2025-01-28 3766.548   69.737 Latin America &amp; Caribbean Brasilia  -47.9292 -15.7801
## 2  Brazil    BR   BRA 2001         2025-01-28 3176.289   70.195 Latin America &amp; Caribbean Brasilia  -47.9292 -15.7801
## 3  Brazil    BR   BRA 2002         2025-01-28 2855.940   70.410 Latin America &amp; Caribbean Brasilia  -47.9292 -15.7801
## 4  Brazil    BR   BRA 2003         2025-01-28 3090.607   70.720 Latin America &amp; Caribbean Brasilia  -47.9292 -15.7801
## 5  Brazil    BR   BRA 2004         2025-01-28 3663.823   71.131 Latin America &amp; Caribbean Brasilia  -47.9292 -15.7801
## 6  Brazil    BR   BRA 2005         2025-01-28 4827.782   71.753 Latin America &amp; Caribbean Brasilia  -47.9292 -15.7801
##                income lending
## 1 Upper middle income    IBRD
## 2 Upper middle income    IBRD
## 3 Upper middle income    IBRD
## 4 Upper middle income    IBRD
## 5 Upper middle income    IBRD
## 6 Upper middle income    IBRD</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="advanced-visualizations.html#cb178-1" tabindex="-1"></a>ch5<span class="fl">.3</span><span class="ot">&lt;-</span>ch5 <span class="sc">%&gt;%</span> </span>
<span id="cb178-2"><a href="advanced-visualizations.html#cb178-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>GDPpc, <span class="at">y=</span>Life_Exp))<span class="sc">+</span></span>
<span id="cb178-3"><a href="advanced-visualizations.html#cb178-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color=</span>region), <span class="at">alpha=</span><span class="fl">0.7</span>, <span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb178-4"><a href="advanced-visualizations.html#cb178-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Faceted Scatter Plot: GDP vs. Life Expectancy&quot;</span>,</span>
<span id="cb178-5"><a href="advanced-visualizations.html#cb178-5" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Year: 2000-2020&quot;</span>,</span>
<span id="cb178-6"><a href="advanced-visualizations.html#cb178-6" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;GDP per Capita (USD)&quot;</span>,</span>
<span id="cb178-7"><a href="advanced-visualizations.html#cb178-7" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Life Expectancy (Years)&quot;</span>,</span>
<span id="cb178-8"><a href="advanced-visualizations.html#cb178-8" tabindex="-1"></a>       <span class="at">color=</span><span class="st">&quot;Region&quot;</span>)<span class="sc">+</span></span>
<span id="cb178-9"><a href="advanced-visualizations.html#cb178-9" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb178-10"><a href="advanced-visualizations.html#cb178-10" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>country, <span class="at">ncol=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb178-11"><a href="advanced-visualizations.html#cb178-11" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()<span class="sc">+</span> <span class="co">#log scale for better visualization</span></span>
<span id="cb178-12"><a href="advanced-visualizations.html#cb178-12" tabindex="-1"></a>  <span class="fu">transition_states</span>(year, <span class="at">transition_length =</span> <span class="dv">2</span>, <span class="at">state_length =</span> <span class="dv">1</span>)</span></code></pre></div>
<p>There are additional things here like the <code>size=3</code> which changes the size of points. the <code>scale_x_log10()</code> was added because it applies a logarithmic scale to the x-axis since GDP per capital values vary widely, and a log scale makes comparisons clearer. The <code>transition_states</code> has <code>year</code> since each frame would represent a different year.</p>
</div>
<div id="saving-and-embedding-animation-2" class="section level4 hasAnchor" number="10.2.3.2">
<h4><span class="header-section-number">10.2.3.2</span> Saving and Embedding Animation<a href="advanced-visualizations.html#saving-and-embedding-animation-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="advanced-visualizations.html#cb179-1" tabindex="-1"></a>anim_file3<span class="ot">&lt;-</span><span class="st">&quot;faceted_scatter_plot.gif&quot;</span></span>
<span id="cb179-2"><a href="advanced-visualizations.html#cb179-2" tabindex="-1"></a><span class="fu">animate</span>(ch5<span class="fl">.3</span>, <span class="at">duration=</span><span class="dv">10</span>, <span class="at">fps=</span><span class="dv">15</span>, <span class="at">renderer=</span><span class="fu">gifski_renderer</span>(anim_file3),</span>
<span id="cb179-3"><a href="advanced-visualizations.html#cb179-3" tabindex="-1"></a>        <span class="at">preview=</span><span class="cn">TRUE</span>)</span>
<span id="cb179-4"><a href="advanced-visualizations.html#cb179-4" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(anim_file3)</span></code></pre></div>
<p>This does not really provide any information. Let us try visualizing in a different way.</p>
</div>
</div>
</div>
<div id="animated-time-series" class="section level2 hasAnchor" number="10.3">
<h2><span class="header-section-number">10.3</span> Animated Time Series<a href="advanced-visualizations.html#animated-time-series" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let us just choose USA for this.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="advanced-visualizations.html#cb180-1" tabindex="-1"></a>ch5_1<span class="ot">&lt;-</span>ch5 <span class="sc">%&gt;%</span> </span>
<span id="cb180-2"><a href="advanced-visualizations.html#cb180-2" tabindex="-1"></a>  <span class="fu">filter</span>(iso3c<span class="sc">==</span><span class="st">&quot;USA&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="advanced-visualizations.html#cb181-1" tabindex="-1"></a>ch5<span class="fl">.4</span><span class="ot">&lt;-</span>ch5_1 <span class="sc">%&gt;%</span> </span>
<span id="cb181-2"><a href="advanced-visualizations.html#cb181-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>GDPpc))<span class="sc">+</span></span>
<span id="cb181-3"><a href="advanced-visualizations.html#cb181-3" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">&quot;green&quot;</span>, <span class="at">size =</span> <span class="fl">1.2</span>)<span class="sc">+</span></span>
<span id="cb181-4"><a href="advanced-visualizations.html#cb181-4" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">&quot;purple&quot;</span>, <span class="at">size=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb181-5"><a href="advanced-visualizations.html#cb181-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;US GDP per Capita Growth over Time&quot;</span>,</span>
<span id="cb181-6"><a href="advanced-visualizations.html#cb181-6" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Year:2000-2020&quot;</span>,</span>
<span id="cb181-7"><a href="advanced-visualizations.html#cb181-7" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Year&quot;</span>,</span>
<span id="cb181-8"><a href="advanced-visualizations.html#cb181-8" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;GDP per Capita (Current US$)&quot;</span>)<span class="sc">+</span></span>
<span id="cb181-9"><a href="advanced-visualizations.html#cb181-9" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb181-10"><a href="advanced-visualizations.html#cb181-10" tabindex="-1"></a>  <span class="fu">transition_reveal</span>(year)</span></code></pre></div>
<div id="saving-and-embedding-animation-3" class="section level4 hasAnchor" number="10.3.0.1">
<h4><span class="header-section-number">10.3.0.1</span> Saving and Embedding Animation<a href="advanced-visualizations.html#saving-and-embedding-animation-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="advanced-visualizations.html#cb182-1" tabindex="-1"></a>anim_file4<span class="ot">&lt;-</span><span class="st">&quot;us_timeseries.gif&quot;</span></span>
<span id="cb182-2"><a href="advanced-visualizations.html#cb182-2" tabindex="-1"></a><span class="fu">animate</span>(ch5<span class="fl">.4</span>, <span class="at">duration =</span> <span class="dv">10</span>, <span class="at">fps =</span> <span class="dv">15</span>, <span class="at">renderer =</span> <span class="fu">gifski_renderer</span>(anim_file4), </span>
<span id="cb182-3"><a href="advanced-visualizations.html#cb182-3" tabindex="-1"></a>        <span class="at">preview =</span> <span class="cn">TRUE</span>)</span>
<span id="cb182-4"><a href="advanced-visualizations.html#cb182-4" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(anim_file4)</span></code></pre></div>
</div>
</div>
<div id="animated-faceted-time-series" class="section level2 hasAnchor" number="10.4">
<h2><span class="header-section-number">10.4</span> Animated Faceted Time Series<a href="advanced-visualizations.html#animated-faceted-time-series" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="advanced-visualizations.html#cb183-1" tabindex="-1"></a>ch5<span class="fl">.5</span><span class="ot">&lt;-</span>ch5 <span class="sc">%&gt;%</span> </span>
<span id="cb183-2"><a href="advanced-visualizations.html#cb183-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>GDPpc, <span class="at">group=</span>country))<span class="sc">+</span></span>
<span id="cb183-3"><a href="advanced-visualizations.html#cb183-3" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color=</span>country), <span class="at">size=</span><span class="fl">1.2</span>)<span class="sc">+</span></span>
<span id="cb183-4"><a href="advanced-visualizations.html#cb183-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Faceted Time Series: GDP Growth Over Time&quot;</span>,</span>
<span id="cb183-5"><a href="advanced-visualizations.html#cb183-5" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Year: 2000-2020&quot;</span>,</span>
<span id="cb183-6"><a href="advanced-visualizations.html#cb183-6" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Year&quot;</span>,</span>
<span id="cb183-7"><a href="advanced-visualizations.html#cb183-7" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;GDP (Current US$)&quot;</span>,</span>
<span id="cb183-8"><a href="advanced-visualizations.html#cb183-8" tabindex="-1"></a>       <span class="at">color=</span><span class="st">&quot;Country&quot;</span>)<span class="sc">+</span></span>
<span id="cb183-9"><a href="advanced-visualizations.html#cb183-9" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb183-10"><a href="advanced-visualizations.html#cb183-10" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>country, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>)<span class="sc">+</span> <span class="co">#allows free-scaling in the y-axis</span></span>
<span id="cb183-11"><a href="advanced-visualizations.html#cb183-11" tabindex="-1"></a>  <span class="fu">transition_reveal</span>(year)</span></code></pre></div>
<div id="saving-and-embedding-animation-4" class="section level4 hasAnchor" number="10.4.0.1">
<h4><span class="header-section-number">10.4.0.1</span> Saving and Embedding Animation<a href="advanced-visualizations.html#saving-and-embedding-animation-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="advanced-visualizations.html#cb184-1" tabindex="-1"></a>anim_file5<span class="ot">&lt;-</span><span class="st">&quot;timeseries.gif&quot;</span></span>
<span id="cb184-2"><a href="advanced-visualizations.html#cb184-2" tabindex="-1"></a><span class="fu">animate</span>(ch5<span class="fl">.5</span>, <span class="at">duration =</span> <span class="dv">10</span>, <span class="at">fps =</span> <span class="dv">15</span>, <span class="at">renderer =</span> <span class="fu">gifski_renderer</span>(anim_file5), </span>
<span id="cb184-3"><a href="advanced-visualizations.html#cb184-3" tabindex="-1"></a>        <span class="at">preview =</span> <span class="cn">TRUE</span>)</span>
<span id="cb184-4"><a href="advanced-visualizations.html#cb184-4" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(anim_file5)</span></code></pre></div>
</div>
<div id="saving-in-quarto" class="section level3 hasAnchor" number="10.4.1">
<h3><span class="header-section-number">10.4.1</span> Saving in Quarto<a href="advanced-visualizations.html#saving-in-quarto" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For Data Presentation, you need to save interactive visualizations so that you can place them in your presentations.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="advanced-visualizations.html#cb185-1" tabindex="-1"></a><span class="co"># Create an animated plot</span></span>
<span id="cb185-2"><a href="advanced-visualizations.html#cb185-2" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(DATA, <span class="fu">aes</span>(MAPPINGS)) <span class="sc">+</span></span>
<span id="cb185-3"><a href="advanced-visualizations.html#cb185-3" tabindex="-1"></a>  geom_function <span class="sc">+</span></span>
<span id="cb185-4"><a href="advanced-visualizations.html#cb185-4" tabindex="-1"></a>  <span class="fu">transition_states</span>(gear, <span class="at">transition_length =</span> <span class="dv">2</span>, <span class="at">state_length =</span> <span class="dv">1</span>)</span>
<span id="cb185-5"><a href="advanced-visualizations.html#cb185-5" tabindex="-1"></a></span>
<span id="cb185-6"><a href="advanced-visualizations.html#cb185-6" tabindex="-1"></a><span class="co"># Save as GIF</span></span>
<span id="cb185-7"><a href="advanced-visualizations.html#cb185-7" tabindex="-1"></a><span class="fu">anim_save</span>(<span class="st">&quot;animation.gif&quot;</span>, p)</span>
<span id="cb185-8"><a href="advanced-visualizations.html#cb185-8" tabindex="-1"></a></span>
<span id="cb185-9"><a href="advanced-visualizations.html#cb185-9" tabindex="-1"></a><span class="co"># Save as MP4</span></span>
<span id="cb185-10"><a href="advanced-visualizations.html#cb185-10" tabindex="-1"></a><span class="fu">anim_save</span>(<span class="st">&quot;animation.mp4&quot;</span>, p)</span></code></pre></div>
</div>
</div>
<div id="maps" class="section level2 hasAnchor" number="10.5">
<h2><span class="header-section-number">10.5</span> Maps<a href="advanced-visualizations.html#maps" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="where-to-get-shapefiles" class="section level3 hasAnchor" number="10.5.1">
<h3><span class="header-section-number">10.5.1</span> Where to get shapefiles?<a href="advanced-visualizations.html#where-to-get-shapefiles" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>rnaturalearth</code> provides some shapefiles you can use. A suggested site to find shapefiles of different countries: <a href="https://gadm.org/index.html" class="uri">https://gadm.org/index.html</a> . You can also locate shapefiles from the government sites.</p>
<p>We will make use of the packages like <code>WDI</code>, <code>rnaturalearth</code>,<code>sf</code>, <code>gganimate</code>, and <code>leaflet</code>. Do note however, that gganimate and leaflet does not work for PDF, thus, it can only be used for your Data Story Presentation.</p>
</div>
</div>
<div id="static-maps" class="section level2 hasAnchor" number="10.6">
<h2><span class="header-section-number">10.6</span> Static Maps<a href="advanced-visualizations.html#static-maps" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="fetching-gdp-data-from-wdi" class="section level3 hasAnchor" number="10.6.1">
<h3><span class="header-section-number">10.6.1</span> Fetching GDP Data from WDI<a href="advanced-visualizations.html#fetching-gdp-data-from-wdi" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="advanced-visualizations.html#cb186-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span>
<span id="cb186-2"><a href="advanced-visualizations.html#cb186-2" tabindex="-1"></a><span class="fu">gc</span>()</span></code></pre></div>
<pre><code>##            used  (Mb) gc trigger  (Mb) max used  (Mb)
## Ncells  5655388 302.1    9801260 523.5  9801260 523.5
## Vcells 11548302  88.2   38668140 295.1 94237569 719.0</code></pre>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="advanced-visualizations.html#cb188-1" tabindex="-1"></a>ch5_2<span class="ot">&lt;-</span><span class="fu">WDI</span>(<span class="at">country =</span> <span class="st">&quot;all&quot;</span>, </span>
<span id="cb188-2"><a href="advanced-visualizations.html#cb188-2" tabindex="-1"></a>           <span class="at">indicator =</span> <span class="st">&quot;NY.GDP.MKTP.CD&quot;</span>,</span>
<span id="cb188-3"><a href="advanced-visualizations.html#cb188-3" tabindex="-1"></a>           <span class="at">start =</span> <span class="dv">2000</span>, </span>
<span id="cb188-4"><a href="advanced-visualizations.html#cb188-4" tabindex="-1"></a>           <span class="at">end =</span> <span class="dv">2022</span>,</span>
<span id="cb188-5"><a href="advanced-visualizations.html#cb188-5" tabindex="-1"></a>           <span class="at">extra=</span><span class="cn">TRUE</span>)</span>
<span id="cb188-6"><a href="advanced-visualizations.html#cb188-6" tabindex="-1"></a></span>
<span id="cb188-7"><a href="advanced-visualizations.html#cb188-7" tabindex="-1"></a><span class="co">#clean the dataset</span></span>
<span id="cb188-8"><a href="advanced-visualizations.html#cb188-8" tabindex="-1"></a>ch5_2<span class="ot">&lt;-</span>ch5_2 <span class="sc">%&gt;%</span> </span>
<span id="cb188-9"><a href="advanced-visualizations.html#cb188-9" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">gdp=</span>NY.GDP.MKTP.CD,</span>
<span id="cb188-10"><a href="advanced-visualizations.html#cb188-10" tabindex="-1"></a>         <span class="at">iso_a3=</span>iso2c) <span class="sc">%&gt;%</span> </span>
<span id="cb188-11"><a href="advanced-visualizations.html#cb188-11" tabindex="-1"></a>  <span class="fu">drop_na</span>(gdp) <span class="co">#dropping missing values</span></span></code></pre></div>
<p>We are retrieving GDP data for all countries from 2000 to 2022 and we are also renaming columns to match with map data found in the <code>rnaturalearth</code>. We also remove missing GDP values</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="advanced-visualizations.html#cb189-1" tabindex="-1"></a>ch5map<span class="ot">&lt;-</span><span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">&quot;medium&quot;</span>, <span class="at">returnclass =</span> <span class="st">&quot;sf&quot;</span>)</span></code></pre></div>
<p>This fetches the world map with country boundaries in <code>sf</code> (simple features) format to visualize the GDP data. We fetch medium-scale country boundaries in spatial data format and the <code>returnclass="sf"</code> ensures it can be used with <code>ggplot2</code></p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="advanced-visualizations.html#cb190-1" tabindex="-1"></a><span class="co">#Merge</span></span>
<span id="cb190-2"><a href="advanced-visualizations.html#cb190-2" tabindex="-1"></a>wgdp<span class="ot">&lt;-</span>ch5map <span class="sc">%&gt;%</span> </span>
<span id="cb190-3"><a href="advanced-visualizations.html#cb190-3" tabindex="-1"></a>  <span class="fu">left_join</span>(ch5_2, <span class="at">by=</span><span class="st">&quot;iso_a3&quot;</span>)</span></code></pre></div>
<p>We need to match the GDP data with the corresponding country for visualization. You can opt to retrieve the world map to find out how to merge both.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="advanced-visualizations.html#cb191-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> wgdp) <span class="sc">+</span></span>
<span id="cb191-2"><a href="advanced-visualizations.html#cb191-2" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> gdp_md)) <span class="sc">+</span></span>
<span id="cb191-3"><a href="advanced-visualizations.html#cb191-3" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>, <span class="at">trans =</span> <span class="st">&quot;log&quot;</span>, <span class="at">na.value =</span> <span class="st">&quot;grey&quot;</span>) <span class="sc">+</span></span>
<span id="cb191-4"><a href="advanced-visualizations.html#cb191-4" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb191-5"><a href="advanced-visualizations.html#cb191-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;GDP by Country&quot;</span>,</span>
<span id="cb191-6"><a href="advanced-visualizations.html#cb191-6" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Data from WDI&quot;</span>,</span>
<span id="cb191-7"><a href="advanced-visualizations.html#cb191-7" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">&quot;GDP (log scale)&quot;</span>)</span></code></pre></div>
<p><img src="LBOMETR_Course_Book_files/figure-html/unnamed-chunk-146-1.png" width="672" /></p>
<p>We use the merged map and GDP data and <code>geom_sf(aes(fill=gdp_md))</code> filles countries based on GDP. The <code>scale_fill_viridis_c</code> uses “plasma” which is best used for maps. The log scale transformation is used to better differentiate large economies and small economies and grey fill for missing data.</p>
<div id="animated-world-map-for-gdp" class="section level4 hasAnchor" number="10.6.1.1">
<h4><span class="header-section-number">10.6.1.1</span> Animated World Map for GDP<a href="advanced-visualizations.html#animated-world-map-for-gdp" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now we create an animated version of the map. You need to check that your time variable does not have any NA. It would be better to choose the years that are available consecutively so we will filter the data to only include from 2009-2019.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="advanced-visualizations.html#cb192-1" tabindex="-1"></a><span class="fu">unique</span>(wgdp<span class="sc">$</span>gdp_year)</span></code></pre></div>
<pre><code>##  [1] 2019 2014 2018 2017 2016 2013 2010 2009 2012 2006 2015 2003 2007 2011</code></pre>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="advanced-visualizations.html#cb194-1" tabindex="-1"></a><span class="co"># Filter for years 2009-2019 </span></span>
<span id="cb194-2"><a href="advanced-visualizations.html#cb194-2" tabindex="-1"></a>wgdp_filtered <span class="ot">&lt;-</span> wgdp <span class="sc">%&gt;%</span>    </span>
<span id="cb194-3"><a href="advanced-visualizations.html#cb194-3" tabindex="-1"></a>  <span class="fu">filter</span>(gdp_year <span class="sc">%in%</span> <span class="dv">2009</span><span class="sc">:</span><span class="dv">2019</span>)</span></code></pre></div>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="advanced-visualizations.html#cb195-1" tabindex="-1"></a>ch5<span class="fl">.6</span> <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> wgdp_filtered) <span class="sc">+</span>   </span>
<span id="cb195-2"><a href="advanced-visualizations.html#cb195-2" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> gdp_md)) <span class="sc">+</span>   </span>
<span id="cb195-3"><a href="advanced-visualizations.html#cb195-3" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>, <span class="at">trans =</span> <span class="st">&quot;log&quot;</span>, <span class="at">na.value =</span> <span class="st">&quot;grey50&quot;</span>) <span class="sc">+</span>   </span>
<span id="cb195-4"><a href="advanced-visualizations.html#cb195-4" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>   </span>
<span id="cb195-5"><a href="advanced-visualizations.html#cb195-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;World GDP by Country: {closest_state}&quot;</span>,        </span>
<span id="cb195-6"><a href="advanced-visualizations.html#cb195-6" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Data from World Development Indicators&quot;</span>,        </span>
<span id="cb195-7"><a href="advanced-visualizations.html#cb195-7" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">&quot;GDP (log scale)&quot;</span>) <span class="sc">+</span>   </span>
<span id="cb195-8"><a href="advanced-visualizations.html#cb195-8" tabindex="-1"></a>  <span class="fu">transition_states</span>(gdp_year) <span class="sc">+</span>     </span>
<span id="cb195-9"><a href="advanced-visualizations.html#cb195-9" tabindex="-1"></a>  <span class="fu">ease_aes</span>(<span class="st">&#39;linear&#39;</span>)</span></code></pre></div>
</div>
<div id="saving-and-embedding-animation-5" class="section level4 hasAnchor" number="10.6.1.2">
<h4><span class="header-section-number">10.6.1.2</span> Saving and Embedding Animation<a href="advanced-visualizations.html#saving-and-embedding-animation-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="advanced-visualizations.html#cb196-1" tabindex="-1"></a>anim_file6<span class="ot">&lt;-</span><span class="st">&quot;worldgdp.gif&quot;</span></span>
<span id="cb196-2"><a href="advanced-visualizations.html#cb196-2" tabindex="-1"></a><span class="fu">animate</span>(ch5<span class="fl">.6</span>, <span class="at">duration =</span> <span class="dv">10</span>, <span class="at">fps =</span> <span class="dv">15</span>, <span class="at">renderer =</span> <span class="fu">gifski_renderer</span>(anim_file6), </span>
<span id="cb196-3"><a href="advanced-visualizations.html#cb196-3" tabindex="-1"></a>        <span class="at">preview =</span> <span class="cn">TRUE</span>)</span>
<span id="cb196-4"><a href="advanced-visualizations.html#cb196-4" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(anim_file6)</span></code></pre></div>
</div>
</div>
</div>
<div id="philippine-regional-map" class="section level2 hasAnchor" number="10.7">
<h2><span class="header-section-number">10.7</span> Philippine Regional Map<a href="advanced-visualizations.html#philippine-regional-map" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We will use <code>Ch6.xlsx</code> containing Regional GDP and use the Philippine Regions shapefile.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="advanced-visualizations.html#cb197-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span>
<span id="cb197-2"><a href="advanced-visualizations.html#cb197-2" tabindex="-1"></a><span class="fu">gc</span>()</span></code></pre></div>
<pre><code>##            used  (Mb) gc trigger  (Mb) max used  (Mb)
## Ncells  5656521 302.1    9801260 523.5  9801260 523.5
## Vcells 11588923  88.5   38668140 295.1 94237569 719.0</code></pre>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="advanced-visualizations.html#cb199-1" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb199-2"><a href="advanced-visualizations.html#cb199-2" tabindex="-1"></a>layers<span class="ot">&lt;-</span><span class="fu">st_layers</span>(<span class="st">&quot;PH_Adm1_Regions.shp&quot;</span>)</span>
<span id="cb199-3"><a href="advanced-visualizations.html#cb199-3" tabindex="-1"></a><span class="fu">print</span>(layers)</span></code></pre></div>
<pre><code>## Driver: ESRI Shapefile 
## Available layers:
##            layer_name geometry_type features fields              crs_name
## 1 PH_Adm1_Regions.shp       Polygon       17      7 WGS 84 / UTM zone 51N
## 2         Regions.shp       Polygon       17     19                WGS 84</code></pre>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="advanced-visualizations.html#cb201-1" tabindex="-1"></a>sp_df <span class="ot">=</span> sf<span class="sc">::</span><span class="fu">st_read</span>( </span>
<span id="cb201-2"><a href="advanced-visualizations.html#cb201-2" tabindex="-1"></a>  <span class="at">dsn=</span> <span class="st">&#39;PH_Adm1_Regions.shp&#39;</span>, </span>
<span id="cb201-3"><a href="advanced-visualizations.html#cb201-3" tabindex="-1"></a>  <span class="at">layer=</span><span class="st">&quot;Regions.shp&quot;</span>)</span></code></pre></div>
<pre><code>## Reading layer `Regions.shp&#39; from data source `C:\Users\jemma\OneDrive\Documents\DLSU\LBOMETR_Book\PH_Adm1_Regions.shp&#39; using driver `ESRI Shapefile&#39;
## Simple feature collection with 17 features and 19 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: 114.2779 ymin: 4.587294 xmax: 126.605 ymax: 21.12189
## Geodetic CRS:  WGS 84</code></pre>
<p>The code loads the <code>sf</code> package then <code>st_layers</code> checks all available layers in the shapefile because some shapefiles contains multiple layers like administrative boundaries, water bodies, etc. so we display the available layers in the console. The <code>st_read(dsn "PH_Adm1_Regions.shp")</code> specifies the data source and the <code>layer = "Regions.shp"</code> specifies the layer name to read (the one we will use and need).</p>
<p>Let us check if the shapefile was loaded correctly.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="advanced-visualizations.html#cb203-1" tabindex="-1"></a><span class="fu">print</span>(sp_df) <span class="co">#check structure</span></span></code></pre></div>
<pre><code>## Simple feature collection with 17 features and 19 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: 114.2779 ymin: 4.587294 xmax: 126.605 ymax: 21.12189
## Geodetic CRS:  WGS 84
## First 10 features:
##    psgc_code                            name corr_code geo_level city_class inc_class urb_rur pop_2015 pop_2020 status
## 1      1e+08        Region I (Ilocos Region)     1e+07       Reg       &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;
## 2      2e+08      Region II (Cagayan Valley)     2e+07       Reg       &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;
## 3      3e+08      Region III (Central Luzon)     3e+07       Reg       &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;
## 4      4e+08        Region IV-A (CALABARZON)     4e+07       Reg       &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;
## 5      5e+08         Region V (Bicol Region)     5e+07       Reg       &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;
## 6      6e+08     Region VI (Western Visayas)     6e+07       Reg       &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;
## 7      7e+08    Region VII (Central Visayas)     7e+07       Reg       &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;
## 8      8e+08   Region VIII (Eastern Visayas)     8e+07       Reg       &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;
## 9      9e+08 Region IX (Zamboanga Peninsula)     9e+07       Reg       &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;
## 10     1e+09    Region X (Northern Mindanao)     1e+08       Reg       &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;
##    adm1_pcode                         adm1_en            adm1_alt adm0_pcode           adm0_en       date shape_len
## 1        PH01        Region I (Ilocos Region)       Ilocos Region         PH Philippines (the) 2022-11-09  14.99505
## 2        PH02      Region II (Cagayan Valley)      Cagayan Valley         PH Philippines (the) 2022-11-09  19.13905
## 3        PH03      Region III (Central Luzon)       Central Luzon         PH Philippines (the) 2022-11-09  15.94956
## 4        PH04        Region IV-A (Calabarzon)          Calabarzon         PH Philippines (the) 2022-11-09  27.62549
## 5        PH05         Region V (Bicol Region)        Bicol Region         PH Philippines (the) 2022-11-09  44.92324
## 6        PH06     Region VI (Western Visayas)     Western Visayas         PH Philippines (the) 2022-11-09  27.77415
## 7        PH07    Region VII (Central Visayas)     Central Visayas         PH Philippines (the) 2022-11-09  29.11311
## 8        PH08   Region VIII (Eastern Visayas)     Eastern Visayas         PH Philippines (the) 2022-11-09  42.02116
## 9        PH09 Region IX (Zamboanga Peninsula) Zamboanga Peninsula         PH Philippines (the) 2022-11-09  23.18144
## 10       PH10    Region X (Northern Mindanao)   Northern Mindanao         PH Philippines (the) 2022-11-09  15.00295
##    shape_area shape_sqkm                       geometry
## 1    1.043983   12307.35 MULTIPOLYGON (((120.9714 18...
## 2    2.241812   26387.73 MULTIPOLYGON (((121.9488 21...
## 3    1.793513   21304.16 MULTIPOLYGON (((122.2342 16...
## 4    1.326720   15846.63 MULTIPOLYGON (((122.3079 14...
## 5    1.446324   17338.38 MULTIPOLYGON (((122.9882 11...
## 6    1.657591   20047.63 MULTIPOLYGON (((121.4341 12...
## 7    1.178431   14293.66 MULTIPOLYGON (((124.093 11....
## 8    1.726804   20835.68 MULTIPOLYGON (((124.3678 12...
## 9    1.196677   14596.05 MULTIPOLYGON (((123.4129 8....
## 10   1.435115   17489.29 MULTIPOLYGON (((124.6987 9....</code></pre>
<p>We then check available attributes and also check the region names so that we can merge the shapefile with our GDP data.</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="advanced-visualizations.html#cb205-1" tabindex="-1"></a><span class="fu">colnames</span>(sp_df)</span></code></pre></div>
<pre><code>##  [1] &quot;psgc_code&quot;  &quot;name&quot;       &quot;corr_code&quot;  &quot;geo_level&quot;  &quot;city_class&quot; &quot;inc_class&quot;  &quot;urb_rur&quot;    &quot;pop_2015&quot;  
##  [9] &quot;pop_2020&quot;   &quot;status&quot;     &quot;adm1_pcode&quot; &quot;adm1_en&quot;    &quot;adm1_alt&quot;   &quot;adm0_pcode&quot; &quot;adm0_en&quot;    &quot;date&quot;      
## [17] &quot;shape_len&quot;  &quot;shape_area&quot; &quot;shape_sqkm&quot; &quot;geometry&quot;</code></pre>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="advanced-visualizations.html#cb207-1" tabindex="-1"></a><span class="fu">head</span>(sp_df)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 19 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: 119.7497 ymin: 9.444193 xmax: 124.4249 ymax: 21.12189
## Geodetic CRS:  WGS 84
##   psgc_code                        name corr_code geo_level city_class inc_class urb_rur pop_2015 pop_2020 status
## 1     1e+08    Region I (Ilocos Region)     1e+07       Reg       &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;
## 2     2e+08  Region II (Cagayan Valley)     2e+07       Reg       &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;
## 3     3e+08  Region III (Central Luzon)     3e+07       Reg       &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;
## 4     4e+08    Region IV-A (CALABARZON)     4e+07       Reg       &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;
## 5     5e+08     Region V (Bicol Region)     5e+07       Reg       &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;
## 6     6e+08 Region VI (Western Visayas)     6e+07       Reg       &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;
##   adm1_pcode                     adm1_en        adm1_alt adm0_pcode           adm0_en       date shape_len shape_area
## 1       PH01    Region I (Ilocos Region)   Ilocos Region         PH Philippines (the) 2022-11-09  14.99505   1.043983
## 2       PH02  Region II (Cagayan Valley)  Cagayan Valley         PH Philippines (the) 2022-11-09  19.13905   2.241812
## 3       PH03  Region III (Central Luzon)   Central Luzon         PH Philippines (the) 2022-11-09  15.94956   1.793513
## 4       PH04    Region IV-A (Calabarzon)      Calabarzon         PH Philippines (the) 2022-11-09  27.62549   1.326720
## 5       PH05     Region V (Bicol Region)    Bicol Region         PH Philippines (the) 2022-11-09  44.92324   1.446324
## 6       PH06 Region VI (Western Visayas) Western Visayas         PH Philippines (the) 2022-11-09  27.77415   1.657591
##   shape_sqkm                       geometry
## 1   12307.35 MULTIPOLYGON (((120.9714 18...
## 2   26387.73 MULTIPOLYGON (((121.9488 21...
## 3   21304.16 MULTIPOLYGON (((122.2342 16...
## 4   15846.63 MULTIPOLYGON (((122.3079 14...
## 5   17338.38 MULTIPOLYGON (((122.9882 11...
## 6   20047.63 MULTIPOLYGON (((121.4341 12...</code></pre>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="advanced-visualizations.html#cb209-1" tabindex="-1"></a><span class="fu">unique</span>(sp_df<span class="sc">$</span>name)</span></code></pre></div>
<pre><code>##  [1] &quot;Region I (Ilocos Region)&quot;                                &quot;Region II (Cagayan Valley)&quot;                             
##  [3] &quot;Region III (Central Luzon)&quot;                              &quot;Region IV-A (CALABARZON)&quot;                               
##  [5] &quot;Region V (Bicol Region)&quot;                                 &quot;Region VI (Western Visayas)&quot;                            
##  [7] &quot;Region VII (Central Visayas)&quot;                            &quot;Region VIII (Eastern Visayas)&quot;                          
##  [9] &quot;Region IX (Zamboanga Peninsula)&quot;                         &quot;Region X (Northern Mindanao)&quot;                           
## [11] &quot;Region XI (Davao Region)&quot;                                &quot;Region XII (SOCCSKSARGEN)&quot;                              
## [13] &quot;National Capital Region (NCR)&quot;                           &quot;Cordillera Administrative Region (CAR)&quot;                 
## [15] &quot;Region XIII (Caraga)&quot;                                    &quot;MIMAROPA Region&quot;                                        
## [17] &quot;Bangsamoro Autonomous Region In Muslim Mindanao (BARMM)&quot;</code></pre>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="advanced-visualizations.html#cb211-1" tabindex="-1"></a>sp_df <span class="ot">&lt;-</span> sp_df <span class="sc">%&gt;%</span></span>
<span id="cb211-2"><a href="advanced-visualizations.html#cb211-2" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">region =</span> name)</span></code></pre></div>
<p>Now, we load our Regional GDP package;</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="advanced-visualizations.html#cb212-1" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb212-2"><a href="advanced-visualizations.html#cb212-2" tabindex="-1"></a>rgdp<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;Ch5PracticeB.xlsx&quot;</span>,</span>
<span id="cb212-3"><a href="advanced-visualizations.html#cb212-3" tabindex="-1"></a>                 <span class="at">sheet =</span> <span class="st">&quot;Sheet1&quot;</span>)</span></code></pre></div>
<pre><code>## New names:
## • `` -&gt; `...1`</code></pre>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="advanced-visualizations.html#cb214-1" tabindex="-1"></a><span class="fu">head</span>(rgdp)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 26
##   ...1  region  `2000` `2001` `2002` `2003` `2004` `2005` `2006` `2007` `2008` `2009` `2010` `2011` `2012` `2013` `2014`
##   &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 NCR   Nation… 2.42e9 2.48e9 2.51e9 2.62e9 2.84e9 2.99e9 3.16e9 3.37e9 3.52e9 3.52e9 3.75e9 3.83e9 4.07e9 4.34e9 4.58e9
## 2 CAR   Cordil… 1.44e8 1.49e8 1.56e8 1.64e8 1.73e8 1.76e8 1.83e8 1.96e8 2.03e8 2.08e8 2.20e8 2.21e8 2.22e8 2.37e8 2.49e8
## 3 I     Ilocos… 2.40e8 2.45e8 2.53e8 2.64e8 2.78e8 2.91e8 3.08e8 3.26e8 3.36e8 3.35e8 3.64e8 3.79e8 3.99e8 4.33e8 4.61e8
## 4 II    Cagaya… 1.58e8 1.64e8 1.66e8 1.71e8 1.86e8 1.83e8 2.01e8 2.14e8 2.19e8 2.24e8 2.33e8 2.48e8 2.65e8 2.89e8 3.13e8
## 5 III   Centra… 7.07e8 7.49e8 7.92e8 8.26e8 8.52e8 8.86e8 9.27e8 9.82e8 1.03e9 1.04e9 1.14e9 1.23e9 1.34e9 1.42e9 1.53e9
## 6 IVA   CALABA… 1.05e9 1.07e9 1.12e9 1.18e9 1.24e9 1.31e9 1.37e9 1.45e9 1.50e9 1.49e9 1.64e9 1.68e9 1.81e9 1.94e9 2.05e9
## # ℹ 9 more variables: `2015` &lt;dbl&gt;, `2016` &lt;dbl&gt;, `2017` &lt;dbl&gt;, `2018` &lt;dbl&gt;, `2019` &lt;dbl&gt;, `2020` &lt;dbl&gt;, `2021` &lt;dbl&gt;,
## #   `2022` &lt;dbl&gt;, `2023` &lt;dbl&gt;</code></pre>
<p>We need to convert the columns to have the same format first so that we can edit all of them later on when we transform to long format since different formats cannot be combined when modifying to long format.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="advanced-visualizations.html#cb216-1" tabindex="-1"></a><span class="fu">colnames</span>(rgdp)<span class="ot">&lt;-</span><span class="fu">as.character</span>(<span class="fu">colnames</span>(rgdp))</span>
<span id="cb216-2"><a href="advanced-visualizations.html#cb216-2" tabindex="-1"></a>rgdp<span class="ot">&lt;-</span>rgdp <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="st">&quot;...1&quot;</span>)</span></code></pre></div>
<p>Now, we can modify</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="advanced-visualizations.html#cb217-1" tabindex="-1"></a>rgdpl<span class="ot">&lt;-</span>rgdp <span class="sc">%&gt;%</span> </span>
<span id="cb217-2"><a href="advanced-visualizations.html#cb217-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>region, <span class="at">names_to =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;GDP&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb217-3"><a href="advanced-visualizations.html#cb217-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year=</span><span class="fu">as.numeric</span>(Year),</span>
<span id="cb217-4"><a href="advanced-visualizations.html#cb217-4" tabindex="-1"></a>         <span class="at">GDP=</span><span class="fu">as.numeric</span>(GDP))</span>
<span id="cb217-5"><a href="advanced-visualizations.html#cb217-5" tabindex="-1"></a><span class="fu">head</span>(rgdpl)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   region                   Year         GDP
##   &lt;chr&gt;                   &lt;dbl&gt;       &lt;dbl&gt;
## 1 National Capital Region  2000 2416391870.
## 2 National Capital Region  2001 2483504980.
## 3 National Capital Region  2002 2507171644.
## 4 National Capital Region  2003 2624052475.
## 5 National Capital Region  2004 2841837836.
## 6 National Capital Region  2005 2988546218.</code></pre>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="advanced-visualizations.html#cb219-1" tabindex="-1"></a><span class="fu">unique</span>(rgdpl<span class="sc">$</span>region)</span></code></pre></div>
<pre><code>##  [1] &quot;National Capital Region&quot;                            &quot;Cordillera Administrative Region&quot;                  
##  [3] &quot;Ilocos Region&quot;                                      &quot;Cagayan Valley&quot;                                    
##  [5] &quot;Central Luzon&quot;                                      &quot;CALABARZON&quot;                                        
##  [7] &quot;MIMAROPA Region&quot;                                    &quot;Bicol Region&quot;                                      
##  [9] &quot;Western Visayas&quot;                                    &quot;Central Visayas&quot;                                   
## [11] &quot;Eastern Visayas&quot;                                    &quot;Zamboanga Peninsula&quot;                               
## [13] &quot;Northern Mindanao&quot;                                  &quot;Davao Region&quot;                                      
## [15] &quot;SOCCSKSARGEN&quot;                                       &quot;Caraga&quot;                                            
## [17] &quot;Bangsamoro Autonomous Region\r\nin Muslim Mindanao&quot;</code></pre>
<p>Since we know that the names are different in the shapefile, we rename the regions in the <code>rgdpl</code>. I create a mapping table for this. You can use this again when you do your own mapping.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="advanced-visualizations.html#cb221-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb221-2"><a href="advanced-visualizations.html#cb221-2" tabindex="-1"></a></span>
<span id="cb221-3"><a href="advanced-visualizations.html#cb221-3" tabindex="-1"></a><span class="co"># Create a mapping table for inconsistent region names</span></span>
<span id="cb221-4"><a href="advanced-visualizations.html#cb221-4" tabindex="-1"></a>region_mapping <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb221-5"><a href="advanced-visualizations.html#cb221-5" tabindex="-1"></a>  <span class="st">&quot;National Capital Region&quot;</span> <span class="ot">=</span> <span class="st">&quot;National Capital Region (NCR)&quot;</span>,</span>
<span id="cb221-6"><a href="advanced-visualizations.html#cb221-6" tabindex="-1"></a>  <span class="st">&quot;Cordillera Administrative Region&quot;</span> <span class="ot">=</span> <span class="st">&quot;Cordillera Administrative Region (CAR)&quot;</span>,</span>
<span id="cb221-7"><a href="advanced-visualizations.html#cb221-7" tabindex="-1"></a>  <span class="st">&quot;Ilocos Region&quot;</span> <span class="ot">=</span> <span class="st">&quot;Region I (Ilocos Region)&quot;</span>,</span>
<span id="cb221-8"><a href="advanced-visualizations.html#cb221-8" tabindex="-1"></a>  <span class="st">&quot;Cagayan Valley&quot;</span> <span class="ot">=</span> <span class="st">&quot;Region II (Cagayan Valley)&quot;</span>,</span>
<span id="cb221-9"><a href="advanced-visualizations.html#cb221-9" tabindex="-1"></a>  <span class="st">&quot;Central Luzon&quot;</span> <span class="ot">=</span> <span class="st">&quot;Region III (Central Luzon)&quot;</span>,</span>
<span id="cb221-10"><a href="advanced-visualizations.html#cb221-10" tabindex="-1"></a>  <span class="st">&quot;CALABARZON&quot;</span> <span class="ot">=</span> <span class="st">&quot;Region IV-A (CALABARZON)&quot;</span>,</span>
<span id="cb221-11"><a href="advanced-visualizations.html#cb221-11" tabindex="-1"></a>  <span class="st">&quot;MIMAROPA Region&quot;</span> <span class="ot">=</span> <span class="st">&quot;MIMAROPA Region&quot;</span>,</span>
<span id="cb221-12"><a href="advanced-visualizations.html#cb221-12" tabindex="-1"></a>  <span class="st">&quot;Bicol Region&quot;</span> <span class="ot">=</span> <span class="st">&quot;Region V (Bicol Region)&quot;</span>,</span>
<span id="cb221-13"><a href="advanced-visualizations.html#cb221-13" tabindex="-1"></a>  <span class="st">&quot;Western Visayas&quot;</span> <span class="ot">=</span> <span class="st">&quot;Region VI (Western Visayas)&quot;</span>,</span>
<span id="cb221-14"><a href="advanced-visualizations.html#cb221-14" tabindex="-1"></a>  <span class="st">&quot;Central Visayas&quot;</span> <span class="ot">=</span> <span class="st">&quot;Region VII (Central Visayas)&quot;</span>,</span>
<span id="cb221-15"><a href="advanced-visualizations.html#cb221-15" tabindex="-1"></a>  <span class="st">&quot;Eastern Visayas&quot;</span> <span class="ot">=</span> <span class="st">&quot;Region VIII (Eastern Visayas)&quot;</span>,</span>
<span id="cb221-16"><a href="advanced-visualizations.html#cb221-16" tabindex="-1"></a>  <span class="st">&quot;Zamboanga Peninsula&quot;</span> <span class="ot">=</span> <span class="st">&quot;Region IX (Zamboanga Peninsula)&quot;</span>,</span>
<span id="cb221-17"><a href="advanced-visualizations.html#cb221-17" tabindex="-1"></a>  <span class="st">&quot;Northern Mindanao&quot;</span> <span class="ot">=</span> <span class="st">&quot;Region X (Northern Mindanao)&quot;</span>,</span>
<span id="cb221-18"><a href="advanced-visualizations.html#cb221-18" tabindex="-1"></a>  <span class="st">&quot;Davao Region&quot;</span> <span class="ot">=</span> <span class="st">&quot;Region XI (Davao Region)&quot;</span>,</span>
<span id="cb221-19"><a href="advanced-visualizations.html#cb221-19" tabindex="-1"></a>  <span class="st">&quot;SOCCSKSARGEN&quot;</span> <span class="ot">=</span> <span class="st">&quot;Region XII (SOCCSKSARGEN)&quot;</span>,</span>
<span id="cb221-20"><a href="advanced-visualizations.html#cb221-20" tabindex="-1"></a>  <span class="st">&quot;Caraga&quot;</span> <span class="ot">=</span> <span class="st">&quot;Region XIII (Caraga)&quot;</span>,</span>
<span id="cb221-21"><a href="advanced-visualizations.html#cb221-21" tabindex="-1"></a>  <span class="st">&quot;Bangsamoro Autonomous Region</span><span class="sc">\r\n</span><span class="st">in Muslim Mindanao&quot;</span> <span class="ot">=</span> <span class="st">&quot;Bangsamoro Autonomous Region In Muslim Mindanao (BARMM)&quot;</span>  <span class="co"># Fix line break issue</span></span>
<span id="cb221-22"><a href="advanced-visualizations.html#cb221-22" tabindex="-1"></a>)</span>
<span id="cb221-23"><a href="advanced-visualizations.html#cb221-23" tabindex="-1"></a></span>
<span id="cb221-24"><a href="advanced-visualizations.html#cb221-24" tabindex="-1"></a><span class="co"># Apply corrections to GDP dataset</span></span>
<span id="cb221-25"><a href="advanced-visualizations.html#cb221-25" tabindex="-1"></a>rgdpl<span class="sc">$</span>region <span class="ot">&lt;-</span> <span class="fu">recode</span>(rgdpl<span class="sc">$</span>region, <span class="sc">!!!</span>region_mapping)</span>
<span id="cb221-26"><a href="advanced-visualizations.html#cb221-26" tabindex="-1"></a></span>
<span id="cb221-27"><a href="advanced-visualizations.html#cb221-27" tabindex="-1"></a><span class="co"># Check if all regions now match</span></span>
<span id="cb221-28"><a href="advanced-visualizations.html#cb221-28" tabindex="-1"></a><span class="fu">setdiff</span>(rgdpl<span class="sc">$</span>region, sp_df<span class="sc">$</span>region)  <span class="co"># Should return an empty set if all match</span></span></code></pre></div>
<p>Now, we can merge.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="advanced-visualizations.html#cb222-1" tabindex="-1"></a>rgdp_map<span class="ot">&lt;-</span>sp_df <span class="sc">%&gt;%</span> </span>
<span id="cb222-2"><a href="advanced-visualizations.html#cb222-2" tabindex="-1"></a>  <span class="fu">left_join</span>(rgdpl, <span class="at">by =</span> <span class="st">&quot;region&quot;</span>)</span>
<span id="cb222-3"><a href="advanced-visualizations.html#cb222-3" tabindex="-1"></a><span class="fu">setdiff</span>(rgdpl<span class="sc">$</span>region, sp_df<span class="sc">$</span>region)</span></code></pre></div>
<pre><code>##  [1] &quot;National Capital Region&quot;                            &quot;Cordillera Administrative Region&quot;                  
##  [3] &quot;Ilocos Region&quot;                                      &quot;Cagayan Valley&quot;                                    
##  [5] &quot;Central Luzon&quot;                                      &quot;CALABARZON&quot;                                        
##  [7] &quot;Bicol Region&quot;                                       &quot;Western Visayas&quot;                                   
##  [9] &quot;Central Visayas&quot;                                    &quot;Eastern Visayas&quot;                                   
## [11] &quot;Zamboanga Peninsula&quot;                                &quot;Northern Mindanao&quot;                                 
## [13] &quot;Davao Region&quot;                                       &quot;SOCCSKSARGEN&quot;                                      
## [15] &quot;Caraga&quot;                                             &quot;Bangsamoro Autonomous Region\r\nin Muslim Mindanao&quot;</code></pre>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="advanced-visualizations.html#cb224-1" tabindex="-1"></a><span class="co">#remove unnecessary columns and mutate GDP to billions</span></span>
<span id="cb224-2"><a href="advanced-visualizations.html#cb224-2" tabindex="-1"></a>rgdp_map <span class="ot">&lt;-</span> rgdp_map <span class="sc">%&gt;%</span></span>
<span id="cb224-3"><a href="advanced-visualizations.html#cb224-3" tabindex="-1"></a>  <span class="fu">select</span>(region, Year, GDP, geometry) <span class="sc">%&gt;%</span></span>
<span id="cb224-4"><a href="advanced-visualizations.html#cb224-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">GDP =</span> GDP <span class="sc">/</span> <span class="fl">1e9</span>)</span></code></pre></div>
<div id="choropleth-map" class="section level4 hasAnchor" number="10.7.0.1">
<h4><span class="header-section-number">10.7.0.1</span> Choropleth Map<a href="advanced-visualizations.html#choropleth-map" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A Choropleth Map is a type of thematic map where regions are color-coded based on a statistical value (e.g., GDP, population, unemployment rate, etc.). It is commonly used in geographic data visualization to show spatial variations across different regions. For the static map, let us choose the latest year, 2023;</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="advanced-visualizations.html#cb225-1" tabindex="-1"></a>rgdp2023<span class="ot">&lt;-</span>rgdp_map <span class="sc">%&gt;%</span> </span>
<span id="cb225-2"><a href="advanced-visualizations.html#cb225-2" tabindex="-1"></a>  <span class="fu">filter</span>(Year<span class="sc">==</span><span class="dv">2023</span>)</span></code></pre></div>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="advanced-visualizations.html#cb226-1" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb226-2"><a href="advanced-visualizations.html#cb226-2" tabindex="-1"></a></span>
<span id="cb226-3"><a href="advanced-visualizations.html#cb226-3" tabindex="-1"></a><span class="co"># Modify the Choropleth Map</span></span>
<span id="cb226-4"><a href="advanced-visualizations.html#cb226-4" tabindex="-1"></a><span class="fu">ggplot</span>(rgdp2023) <span class="sc">+</span></span>
<span id="cb226-5"><a href="advanced-visualizations.html#cb226-5" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> GDP), <span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span>  <span class="co"># Fill regions based on GDP</span></span>
<span id="cb226-6"><a href="advanced-visualizations.html#cb226-6" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(</span>
<span id="cb226-7"><a href="advanced-visualizations.html#cb226-7" tabindex="-1"></a>    <span class="at">option =</span> <span class="st">&quot;magma&quot;</span>, </span>
<span id="cb226-8"><a href="advanced-visualizations.html#cb226-8" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">&quot;GDP (2023)&quot;</span>, </span>
<span id="cb226-9"><a href="advanced-visualizations.html#cb226-9" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>, <span class="at">suffix =</span> <span class="st">&quot;B&quot;</span>, <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>)  <span class="co"># Fix rounding issue</span></span>
<span id="cb226-10"><a href="advanced-visualizations.html#cb226-10" tabindex="-1"></a>  ) <span class="sc">+</span>  </span>
<span id="cb226-11"><a href="advanced-visualizations.html#cb226-11" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Regional GDP of the Philippines (2023)&quot;</span>) <span class="sc">+</span></span>
<span id="cb226-12"><a href="advanced-visualizations.html#cb226-12" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="LBOMETR_Course_Book_files/figure-html/unnamed-chunk-163-1.png" width="672" /></p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="advanced-visualizations.html#cb227-1" tabindex="-1"></a><span class="co">#Saving the images</span></span>
<span id="cb227-2"><a href="advanced-visualizations.html#cb227-2" tabindex="-1"></a><span class="co">#ggsave(&quot;rgdp2023.jpg&quot;, plot = last_plot(), width = 10, height = 8, dpi = 300)</span></span>
<span id="cb227-3"><a href="advanced-visualizations.html#cb227-3" tabindex="-1"></a><span class="co">#or plot = nameofplot, width and height are in inches and for high quality image, dpi = 300</span></span></code></pre></div>
</div>
<div id="bubble-map" class="section level4 hasAnchor" number="10.7.0.2">
<h4><span class="header-section-number">10.7.0.2</span> Bubble Map<a href="advanced-visualizations.html#bubble-map" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A Bubble Map is a type of thematic map that represents data values using circles (bubbles) placed over specific locations. The size of the bubble corresponds to the magnitude of the variable being visualized (e.g., GDP, population, sales, etc.). We use 2023 again.</p>
<p>The first step that we need to do is calculate the <code>centroids</code> using <code>st_centroid</code> from the <code>sf</code> package because this calculates the geometric center of each polygon region in the shapefile. These will be used as our bubble locations and to ensure that there will be no overlapping with borders.</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="advanced-visualizations.html#cb228-1" tabindex="-1"></a>phr_centroids<span class="ot">&lt;-</span><span class="fu">st_centroid</span>(rgdp2023)</span></code></pre></div>
<pre><code>## Warning: st_centroid assumes attributes are constant over geometries</code></pre>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="advanced-visualizations.html#cb230-1" tabindex="-1"></a><span class="fu">print</span>(phr_centroids)</span></code></pre></div>
<pre><code>## Simple feature collection with 1 feature and 3 fields
## Geometry type: POINT
## Dimension:     XY
## Bounding box:  xmin: 119.8902 ymin: 11.35282 xmax: 119.8902 ymax: 11.35282
## Geodetic CRS:  WGS 84
##            region Year      GDP                  geometry
## 1 MIMAROPA Region 2023 0.411435 POINT (119.8902 11.35282)</code></pre>
<p>We now create our Bubble Map</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="advanced-visualizations.html#cb232-1" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb232-2"><a href="advanced-visualizations.html#cb232-2" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>rgdp2023, <span class="at">fill =</span> <span class="st">&quot;gray&quot;</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>)<span class="sc">+</span><span class="co">#base map</span></span>
<span id="cb232-3"><a href="advanced-visualizations.html#cb232-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> phr_centroids, </span>
<span id="cb232-4"><a href="advanced-visualizations.html#cb232-4" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">st_coordinates</span>(geometry)[,<span class="dv">1</span>], </span>
<span id="cb232-5"><a href="advanced-visualizations.html#cb232-5" tabindex="-1"></a>                 <span class="at">y =</span> <span class="fu">st_coordinates</span>(geometry)[,<span class="dv">2</span>], </span>
<span id="cb232-6"><a href="advanced-visualizations.html#cb232-6" tabindex="-1"></a>                 <span class="at">size =</span> GDP, </span>
<span id="cb232-7"><a href="advanced-visualizations.html#cb232-7" tabindex="-1"></a>                 <span class="at">color =</span> GDP), </span>
<span id="cb232-8"><a href="advanced-visualizations.html#cb232-8" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span> </span>
<span id="cb232-9"><a href="advanced-visualizations.html#cb232-9" tabindex="-1"></a>  <span class="fu">scale_size</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">15</span>), <span class="at">name =</span> <span class="st">&quot;GDP (2023)&quot;</span>) <span class="sc">+</span>  <span class="co"># Adjust bubble size</span></span>
<span id="cb232-10"><a href="advanced-visualizations.html#cb232-10" tabindex="-1"></a>  <span class="fu">scale_color_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;magma&quot;</span>, <span class="at">name =</span> <span class="st">&quot;GDP (2023)&quot;</span>, <span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>, <span class="at">suffix =</span> <span class="st">&quot;B&quot;</span>, <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb232-11"><a href="advanced-visualizations.html#cb232-11" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Regional GDP of the Philippines (2023)&quot;</span>,</span>
<span id="cb232-12"><a href="advanced-visualizations.html#cb232-12" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Bubble Size Represents GDP&quot;</span>,</span>
<span id="cb232-13"><a href="advanced-visualizations.html#cb232-13" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Coordinates&quot;</span>,</span>
<span id="cb232-14"><a href="advanced-visualizations.html#cb232-14" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Coordinates&quot;</span>)<span class="sc">+</span></span>
<span id="cb232-15"><a href="advanced-visualizations.html#cb232-15" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="LBOMETR_Course_Book_files/figure-html/unnamed-chunk-165-1.png" width="672" /></p>
<p>As you can see, the base map is drawn using <code>geom_sf()</code> then the bubbles represent the GDP values. The bubble size and color represent GDP magnitude.</p>
<p>You will notice that <code>ggplot()</code> is empty, this creates an empty ggplot canvas where the map layers will be added using the <code>geom_sf</code>.</p>
<p>In the <code>aes</code> there’s <code>x = st_coordinates(geometry)[,1]</code> same for y. These extract the longitude and latitude of each centroid.</p>
<p>The <code>scale_size()</code> range sets the bubble sizes between 2 and 15 units but you can edit this.</p>
<p>Now, <code>scale_viridis_c</code> has more things, the name sets the legend title for GDP colors. the labels ensures decimal precision and adds suffix B, plus, adds comma separators since we do not want the legend to contain scientific notations.</p>
</div>
</div>
<div id="animated-map" class="section level2 hasAnchor" number="10.8">
<h2><span class="header-section-number">10.8</span> Animated Map<a href="advanced-visualizations.html#animated-map" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="animated-philippine-regional-gdp-choropleth-map" class="section level4 hasAnchor" number="10.8.0.1">
<h4><span class="header-section-number">10.8.0.1</span> Animated Philippine Regional GDP Choropleth Map<a href="advanced-visualizations.html#animated-philippine-regional-gdp-choropleth-map" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We will now make an animated version of the Regional GDP Choropleth Map since we have data from 2000 to 2023. Let’s convert to billions like what we did for the 2023.</p>
<p>It takes really long to render (it depends on the memory you have in your laptops) so, I will place the best strategy, that is creating static maps and combining them to form a video. Notice that when cleaning the environment, I chose to keep <code>rgdp_map</code> since we will still use this.</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="advanced-visualizations.html#cb233-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">setdiff</span>(<span class="fu">ls</span>(), <span class="st">&quot;rgdp_map&quot;</span>))</span>
<span id="cb233-2"><a href="advanced-visualizations.html#cb233-2" tabindex="-1"></a><span class="fu">gc</span>()</span></code></pre></div>
<pre><code>##            used  (Mb) gc trigger  (Mb) max used  (Mb)
## Ncells  5671210 302.9    9801260 523.5  9801260 523.5
## Vcells 37653520 287.3   90248960 688.6 94237569 719.0</code></pre>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="advanced-visualizations.html#cb235-1" tabindex="-1"></a><span class="co">#for mp4</span></span>
<span id="cb235-2"><a href="advanced-visualizations.html#cb235-2" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(av)) <span class="fu">install.packages</span>(<span class="st">&quot;av&quot;</span>)</span>
<span id="cb235-3"><a href="advanced-visualizations.html#cb235-3" tabindex="-1"></a><span class="fu">library</span>(av)</span></code></pre></div>
<p>We need to create a directory <em>within</em> our working directory where the images will be saved.</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="advanced-visualizations.html#cb236-1" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;ch_gdp_frames&quot;</span>, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>We now generate static maps; this requires us to create a function/loop. You will notice that the <code>plot.background</code> was set twice. It is because when we use the <code>av</code>, the default is a black setting so it’s better to have a white background set for the plot and the entire canvas.</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="advanced-visualizations.html#cb237-1" tabindex="-1"></a><span class="cf">for</span>(year <span class="cf">in</span> <span class="dv">2000</span><span class="sc">:</span><span class="dv">2023</span>){</span>
<span id="cb237-2"><a href="advanced-visualizations.html#cb237-2" tabindex="-1"></a>  <span class="co">#filter data for the specific year</span></span>
<span id="cb237-3"><a href="advanced-visualizations.html#cb237-3" tabindex="-1"></a>  data_year<span class="ot">&lt;-</span>rgdp_map <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Year<span class="sc">==</span>year)</span>
<span id="cb237-4"><a href="advanced-visualizations.html#cb237-4" tabindex="-1"></a>  </span>
<span id="cb237-5"><a href="advanced-visualizations.html#cb237-5" tabindex="-1"></a>  <span class="co">#Generate the plot</span></span>
<span id="cb237-6"><a href="advanced-visualizations.html#cb237-6" tabindex="-1"></a>  ip<span class="ot">&lt;-</span><span class="fu">ggplot</span>(data_year) <span class="sc">+</span></span>
<span id="cb237-7"><a href="advanced-visualizations.html#cb237-7" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> GDP), <span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb237-8"><a href="advanced-visualizations.html#cb237-8" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(</span>
<span id="cb237-9"><a href="advanced-visualizations.html#cb237-9" tabindex="-1"></a>    <span class="at">option =</span> <span class="st">&quot;magma&quot;</span>,</span>
<span id="cb237-10"><a href="advanced-visualizations.html#cb237-10" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">&quot;GDP&quot;</span>,</span>
<span id="cb237-11"><a href="advanced-visualizations.html#cb237-11" tabindex="-1"></a>    <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_number</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>, <span class="at">suffix =</span> <span class="st">&quot;B&quot;</span>, <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb237-12"><a href="advanced-visualizations.html#cb237-12" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb237-13"><a href="advanced-visualizations.html#cb237-13" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb237-14"><a href="advanced-visualizations.html#cb237-14" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">paste</span>(<span class="st">&quot;Regional GDP of the Philippines&quot;</span>),</span>
<span id="cb237-15"><a href="advanced-visualizations.html#cb237-15" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Year:&quot;</span>, year),</span>
<span id="cb237-16"><a href="advanced-visualizations.html#cb237-16" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">&quot;GDP (Billion $)&quot;</span></span>
<span id="cb237-17"><a href="advanced-visualizations.html#cb237-17" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb237-18"><a href="advanced-visualizations.html#cb237-18" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb237-19"><a href="advanced-visualizations.html#cb237-19" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb237-20"><a href="advanced-visualizations.html#cb237-20" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb237-21"><a href="advanced-visualizations.html#cb237-21" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb237-22"><a href="advanced-visualizations.html#cb237-22" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>),  <span class="co"># Set white background</span></span>
<span id="cb237-23"><a href="advanced-visualizations.html#cb237-23" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>)   <span class="co"># Set white background</span></span>
<span id="cb237-24"><a href="advanced-visualizations.html#cb237-24" tabindex="-1"></a>  )</span>
<span id="cb237-25"><a href="advanced-visualizations.html#cb237-25" tabindex="-1"></a></span>
<span id="cb237-26"><a href="advanced-visualizations.html#cb237-26" tabindex="-1"></a>  </span>
<span id="cb237-27"><a href="advanced-visualizations.html#cb237-27" tabindex="-1"></a>  <span class="co"># Save the plot as an image</span></span>
<span id="cb237-28"><a href="advanced-visualizations.html#cb237-28" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="fu">paste0</span>(<span class="st">&quot;ch_gdp_frames/gdp_&quot;</span>, year, <span class="st">&quot;.png&quot;</span>), <span class="at">plot =</span> ip, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">6</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb237-29"><a href="advanced-visualizations.html#cb237-29" tabindex="-1"></a>}</span></code></pre></div>
<p>You need to edit some parts, such as the <code>2000:2023</code> with whatever years you have; you need to filter data depending on how you called the time column. Then edit the <code>fill</code> and other things.</p>
<p>We now combine our static maps into MP4. If you want the transition for each year to be seen clearly, the framerate is set at 1 to have 1 frame per second and the frame is repeated twice. the <code>vfilter</code> makes the video HD</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="advanced-visualizations.html#cb238-1" tabindex="-1"></a>file_list <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;ch_gdp_frames&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;gdp_.*</span><span class="sc">\\</span><span class="st">.png&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb238-2"><a href="advanced-visualizations.html#cb238-2" tabindex="-1"></a>rep_files <span class="ot">&lt;-</span> <span class="fu">rep</span>(file_list, <span class="at">each =</span> <span class="dv">2</span>)  <span class="co"># Repeat each frame twice</span></span>
<span id="cb238-3"><a href="advanced-visualizations.html#cb238-3" tabindex="-1"></a>av<span class="sc">::</span><span class="fu">av_encode_video</span>(</span>
<span id="cb238-4"><a href="advanced-visualizations.html#cb238-4" tabindex="-1"></a>  <span class="at">input =</span> rep_files,</span>
<span id="cb238-5"><a href="advanced-visualizations.html#cb238-5" tabindex="-1"></a>  <span class="at">output =</span> <span class="st">&quot;ch_rgdp_time.mp4&quot;</span>,</span>
<span id="cb238-6"><a href="advanced-visualizations.html#cb238-6" tabindex="-1"></a>  <span class="at">framerate =</span> <span class="dv">1</span>,</span>
<span id="cb238-7"><a href="advanced-visualizations.html#cb238-7" tabindex="-1"></a>  <span class="at">vfilter =</span> <span class="st">&quot;scale=1280:720&quot;</span></span>
<span id="cb238-8"><a href="advanced-visualizations.html#cb238-8" tabindex="-1"></a>)</span></code></pre></div>
</div>
</div>
<div id="practical-advanced-visualizations" class="section level2 hasAnchor" number="10.9">
<h2><span class="header-section-number">10.9</span> Practical: Advanced Visualizations<a href="advanced-visualizations.html#practical-advanced-visualizations" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For the practical, you need to search and clean the dataset on your own. Please search in PSA OpenStat: <em>Number of Registered Live Births by Sex and by Usual Residence of Mother (Region, Province and Highly Urbanized City), Philippines: January - December 2013-2022.</em> Only gather regional data since the shapefile that is given for this practical is for Regions only. Please save each animation using <code>anim_save</code></p>
<ol style="list-style-type: decimal">
<li>Using PSA OpenStat (2013-2022) data, create an animated bar chart showing the total number of live births per year. Differentiate Male vs. Female births using <code>fill</code></li>
<li>Create an animated bar chart that compares the number of live births per region over time (2013-2022). Use <code>transition_states(year, wrap = FALSE)</code> to animate regional birth counts changing over time. Determine the region with the highest live births in each frame.</li>
<li>Select 3-5 regions and visualize their live birth trends (2013-2022) using an animated time series plot.</li>
<li>Using PSA OpenStat (2013-2022) data and a Philippines regional shapefile, create a static choropleth map of the recent number of live births per region. Color the regions based on <code>birth count</code></li>
<li>Using PSA OpenStat (2013-2022) data and a Philippines regional shapefile, create an animated choropleth map showing how the number of live births per region changes over time. Color the regions based on <code>birth count</code></li>
<li>How do birth trends differ across Philippine regions?</li>
<li>Which regions have experienced the highest increase or decrease in live births from 2013 to 2022?</li>
<li>How does using <code>gganimate</code> with <code>sf</code> enhance your ability to analyze spatial(and time) data trends?</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="visualizations-using-ggplot2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="descriptive-statistics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["LBOMETR_Course_Book.pdf", "LBOMETR_Course_Book.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"depth": 4
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
